"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[4796],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>h});var a=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var p=a.createContext({}),s=function(e){var n=a.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},u=function(e){var n=s(e.components);return a.createElement(p.Provider,{value:n},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},k=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,r=e.originalType,p=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),c=s(t),k=o,h=c["".concat(p,".").concat(k)]||c[k]||m[k]||r;return t?a.createElement(h,l(l({ref:n},u),{},{components:t})):a.createElement(h,l({ref:n},u))}));function h(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var r=t.length,l=new Array(r);l[0]=k;var i={};for(var p in n)hasOwnProperty.call(n,p)&&(i[p]=n[p]);i.originalType=e,i[c]="string"==typeof e?e:o,l[1]=i;for(var s=2;s<r;s++)l[s]=t[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}k.displayName="MDXCreateElement"},9683:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>l,default:()=>m,frontMatter:()=>r,metadata:()=>i,toc:()=>s});var a=t(7462),o=(t(7294),t(3905));const r={title:"Unions and interfaces",date:new Date("2023-10-30T00:00:00.000Z"),authors:"lin-xii",tags:["Apollo","GraphQL","\u6e23\u7ffb\u8bd1"]},l=void 0,i={unversionedId:"Apollo Server/Defining a schema/union-and-interface",id:"Apollo Server/Defining a schema/union-and-interface",title:"Unions and interfaces",description:"Union \u548c interface \u662f\u62bd\u8c61\u7c7b\u578b\uff0c\u5b83\u4eec\u5141\u8bb8\u4e00\u4e2a schema \u5b57\u6bb5\uff0c\u8fd4\u56de\u591a\u4e2a\u7c7b\u578b\u4e2d\u7684\u67d0\u4e00\u79cd\u7c7b\u578b\u3002",source:"@site/docs/Apollo Server/Defining a schema/union-and-interface.md",sourceDirName:"Apollo Server/Defining a schema",slug:"/Apollo Server/Defining a schema/union-and-interface",permalink:"/blog/docs/Apollo Server/Defining a schema/union-and-interface",draft:!1,tags:[{label:"Apollo",permalink:"/blog/docs/tags/apollo"},{label:"GraphQL",permalink:"/blog/docs/tags/graph-ql"},{label:"\u6e23\u7ffb\u8bd1",permalink:"/blog/docs/tags/\u6e23\u7ffb\u8bd1"}],version:"current",frontMatter:{title:"Unions and interfaces",date:"2023-10-30T00:00:00.000Z",authors:"lin-xii",tags:["Apollo","GraphQL","\u6e23\u7ffb\u8bd1"]},sidebar:"tutorialSidebar",previous:{title:"Schema basics",permalink:"/blog/docs/Apollo Server/Defining a schema/graphql-schema-basics"},next:{title:"Introduction",permalink:"/blog/docs/Apollo Server/Introduction"}},p={},s=[{value:"Union",id:"union",level:2},{value:"\u4f8b\u5b50",id:"\u4f8b\u5b50",level:3},{value:"\u67e5\u8be2\u4e00\u4e2a union",id:"\u67e5\u8be2\u4e00\u4e2a-union",level:3},{value:"\u89e3\u6790\u4e00\u4e2a union",id:"\u89e3\u6790\u4e00\u4e2a-union",level:3},{value:"interface",id:"interface",level:2},{value:"\u4f8b\u5b50",id:"\u4f8b\u5b50-1",level:3},{value:"\u67e5\u8be2\u4e00\u4e2a interface",id:"\u67e5\u8be2\u4e00\u4e2a-interface",level:3},{value:"\u89e3\u6790\u4e00\u4e2a interface",id:"\u89e3\u6790\u4e00\u4e2a-interface",level:3}],u={toc:s},c="wrapper";function m(e){let{components:n,...t}=e;return(0,o.kt)(c,(0,a.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Union")," \u548c ",(0,o.kt)("strong",{parentName:"p"},"interface")," \u662f\u62bd\u8c61\u7c7b\u578b\uff0c\u5b83\u4eec\u5141\u8bb8\u4e00\u4e2a schema \u5b57\u6bb5\uff0c\u8fd4\u56de\u591a\u4e2a\u7c7b\u578b\u4e2d\u7684\u67d0\u4e00\u79cd\u7c7b\u578b\u3002"),(0,o.kt)("h2",{id:"union"},"Union"),(0,o.kt)("p",null,"\u5f53\u4f60\u5b9a\u4e49\u4e00\u4e2a union \u7c7b\u578b\u65f6\uff0c\u4f60\u58f0\u660e\u7684\u5bf9\u8c61\u7c7b\u578b\u53ef\u4ee5\u88ab\u5305\u542b\u5728 union \u4e2d\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-graphql"},"union Media = Book | Movie\n")),(0,o.kt)("p",null,"\u4e00\u4e2a\u5b57\u6bb5\u53ef\u4ee5\u5c06\u4e00\u4e2a union \u7c7b\u578b(\u6216\u8005\u4e00\u4e2a union \u7c7b\u578b\u7684\u5217\u8868)\uff0c\u4f5c\u4e3a\u5b83\u7684\u8fd4\u56de\u503c\u7c7b\u578b\u3002\u5b83\u53ef\u4ee5\u8fd4\u56de\u4efb\u4e00\u88ab\u5305\u542b\u5728 union \u4e2d\u7684\u5bf9\u8c61\u7c7b\u578b\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-graphql"},"type Query {\n  allMedia: [Media] # This list can include both Book and Movie objects\n}\n")),(0,o.kt)("p",null,"union \u7c7b\u578b\u6240\u5305\u542b\u7684\u6240\u6709\u7c7b\u578b\uff0c\u5fc5\u987b\u662f",(0,o.kt)("a",{parentName:"p",href:"https://www.apollographql.com/docs/apollo-server/schema/schema/#object-types"},"\u5bf9\u8c61\u7c7b\u578b"),"(\u4e0d\u80fd\u662f scalar\u3001input \u7c7b\u578b)\u3002\u88ab\u5305\u542b\u7684\u7c7b\u578b\u4e4b\u95f4\uff0c\u4e0d\u9700\u8981\u5171\u4eab\u4efb\u4f55\u5b57\u6bb5\u3002"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u79c1\u8d27\uff1a\u88ab\u5305\u542b\u7684\u7c7b\u578b\u4e4b\u95f4\uff0c\u53ef\u4ee5\u662f\u6beb\u65e0\u5173\u8054\u7684\u7c7b\u578b\uff0c\u5b57\u6bb5\u4e0d\u9700\u8981\u6709\u76f8\u4f3c\u6027\u3002")),(0,o.kt)("h3",{id:"\u4f8b\u5b50"},"\u4f8b\u5b50"),(0,o.kt)("p",null,"\u4e0b\u9762\u7684 schema \u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a",(0,o.kt)("inlineCode",{parentName:"p"},"SearchResult"),"\u7684 union \u7c7b\u578b\u3002\u5b83\u53ef\u4ee5\u8fd4\u56de\u4e00\u672c",(0,o.kt)("inlineCode",{parentName:"p"},"Book"),"\u6216\u4e00\u4f4d",(0,o.kt)("inlineCode",{parentName:"p"},"Author"),"\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-graphql"},"union SearchResult = Book | Author\n\ntype Book {\n  title: String!\n}\n\ntype Author {\n  name: String!\n}\n\ntype Query {\n  search(contains: String): [SearchResult!]\n}\n")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"SearchResult"),"\u7c7b\u578b\u5141\u8bb8",(0,o.kt)("inlineCode",{parentName:"p"},"Query.search"),"\u8fd4\u56de\u4e00\u4e2a\u5305\u542b",(0,o.kt)("inlineCode",{parentName:"p"},"Book"),"s \u548c",(0,o.kt)("inlineCode",{parentName:"p"},"Author"),"s \u7684\u5217\u8868\u3002"),(0,o.kt)("h3",{id:"\u67e5\u8be2\u4e00\u4e2a-union"},"\u67e5\u8be2\u4e00\u4e2a union"),(0,o.kt)("p",null,"\u5982\u679c\u4e00\u4e2a\u8fd4\u56de\u503c\u7684\u7c7b\u578b\uff0c\u662f union \u65f6\uff0cGraphQL \u5ba2\u6237\u7aef\u4e0d\u77e5\u9053\u5b57\u6bb5\u5c06\u8fd4\u56de\u54ea\u4e2a\u5bf9\u8c61\u7c7b\u578b\u3002\u4e3a\u6b64\uff0c\u4e00\u4e2a\u67e5\u8be2\u53ef\u4ee5\u5305\u542b\u591a\u79cd\u53ef\u80fd\u7c7b\u578b\u7684\u5b50\u5b57\u6bb5\u3002"),(0,o.kt)("p",null,"\u4e0b\u9762\u662f\u4e00\u4e2a\u67e5\u8be2 schema \u7684\u793a\u4f8b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-graphql"},'query GetSearchResults {\n  search(contains: "Shakespeare") {\n    # Querying for __typename is almost always recommended,\n    # but it\'s even more important when querying a field that\n    # might return one of multiple types.\n    __typename\n    ... on Book {\n      title\n    }\n    ... on Author {\n      name\n    }\n  }\n}\n')),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("a",{parentName:"p",href:"https://www.apollographql.com/docs/apollo-server/schema/schema/#the-__typename-field"},"\u4ec0\u4e48\u662f",(0,o.kt)("inlineCode",{parentName:"a"},"__typename"),"\u5b57\u6bb5\uff1f"))),(0,o.kt)("p",null,"\u8fd9\u4e2a\u67e5\u8be2\u4f7f\u7528 ",(0,o.kt)("a",{parentName:"p",href:"https://graphql.org/learn/queries/#inline-fragments"},"inline fragment")," \u8bed\u6cd5\u53bb\u67e5\u8be2",(0,o.kt)("inlineCode",{parentName:"p"},"SearchResult"),"\u7684",(0,o.kt)("inlineCode",{parentName:"p"},"title"),"(\u5982\u679c\u4ed6\u662f",(0,o.kt)("inlineCode",{parentName:"p"},"Book"),")\u6216",(0,o.kt)("inlineCode",{parentName:"p"},"name"),"(\u5982\u679c\u4ed6\u662f",(0,o.kt)("inlineCode",{parentName:"p"},"Author"),")\u3002web \u5ba2\u6237\u7aef\u53ef\u4ee5\u88ab ",(0,o.kt)("a",{parentName:"p",href:"https://www.apollographql.com/docs/react/data/fragments/#using-fragments-with-unions-and-interfaces"},"passing the possibleTypes option"),"\u544a\u77e5\u5173\u4e8e\u8fd9\u4e2a\u591a\u6001\u7684\u5173\u7cfb\u3002"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u79c1\u8d27\uff1apassing possibleTypes option \u662f\u4e2a\u5565\uff1f")),(0,o.kt)("p",null,"\u4e0b\u9762\u662f\u524d\u9762\u67e5\u8be2\u7684\u8fd4\u56de\u7ed3\u679c\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "search": [\n      {\n        "__typename": "Book",\n        "title": "The Complete Works of William Shakespeare"\n      },\n      {\n        "__typename": "Author",\n        "name": "William Shakespeare"\n      }\n    ]\n  }\n}\n')),(0,o.kt)("h3",{id:"\u89e3\u6790\u4e00\u4e2a-union"},"\u89e3\u6790\u4e00\u4e2a union"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u9605\u8bfb\u672c\u7ae0\u8282\u524d\uff0c\u5efa\u8bae\u5148\u4e86\u89e3",(0,o.kt)("a",{parentName:"p",href:"https://www.apollographql.com/docs/apollo-server/data/resolvers"},"resolver"))),(0,o.kt)("p",null,"\u4e3a\u4e86\u5168\u9762\u89e3\u6790 union\uff0cApollo Server \u9700\u8981\u786e\u8ba4 union \u5c06\u4f1a\u8fd4\u56de\u54ea\u4e00\u79cd\u7c7b\u578b\u3002\u4e3a\u6b64\uff0c\u4f60\u9700\u8981\u5728 resolver map \u4e2d\uff0c\u4e3a union \u5b9a\u4e49\u4e00\u4e2a",(0,o.kt)("inlineCode",{parentName:"p"},"__resolveType"),"\u51fd\u6570\u3002"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"__resolveType"),"\u51fd\u6570\u8d1f\u8d23\u786e\u5b9a\u4e00\u4e2a\u5bf9\u8c61\u7684 GraphQL \u8fd4\u56de\u7c7b\u578b\u5e76\u4e14\u4ee5\u5b57\u7b26\u4e32\u7684\u5f62\u5f0f\u8fd4\u56de\u7c7b\u578b\u540d\u79f0\u3002\u53ef\u4ee5\u901a\u8fc7\u4efb\u610f\u903b\u8f91\u6765\u5b8c\u6210\u8fd9\u4ef6\u4e8b\uff0c\u4f8b\u5982\uff1a"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u68c0\u67e5\u5b57\u6bb5\u4e0a\u7684\u67d0\u5177\u6709\u552f\u4e00\u7279\u5f81\u7684\u503c\u662f\u5426\u5b58\u5728"),(0,o.kt)("li",{parentName:"ul"},"\u5982\u679c ",(0,o.kt)("em",{parentName:"li"},"JavaScript")," \u5bf9\u8c61\u7684\u7c7b\u578b\u4e0e ",(0,o.kt)("em",{parentName:"li"},"GraphQL")," \u7684\u7c7b\u578b\u76f8\u5173\u8fde\uff0c\u5219\u4f7f\u7528",(0,o.kt)("inlineCode",{parentName:"li"},"instanceOf"),"\u3002")),(0,o.kt)("p",null,"\u4e0b\u9762\u662f\u4e00\u4e2a\u4e3a",(0,o.kt)("inlineCode",{parentName:"p"},"SearchResult"),"\u5b9a\u4e49\u7684",(0,o.kt)("inlineCode",{parentName:"p"},"__resovleType"),"\u51fd\u6570\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"const resolvers = {\n  SearchResult: {\n    __resolveType(obj, contextValue, info){\n      // Only Author has a name field\n      if(obj.name){\n        return 'Author';\n      }\n      // Only Book has a title field\n      if(obj.title){\n        return 'Book';\n      }\n      return null; // GraphQLError is thrown\n    },\n  },\n  Query: {\n    search: () => { ... }\n  },\n};\n\nconst server = new ApolloServer({\n  typeDefs,\n  resolvers,\n});\n\nconst { url } = await startStandaloneServer(server);\n\nconsole.log(`\ud83d\ude80  Server ready at: ${url}`);\n")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5982\u679c",(0,o.kt)("inlineCode",{parentName:"p"},"__resolveType"),"\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u4e0e schema \u7c7b\u578b\u5b9a\u4e49\u4e0d\u76f8\u7b26\u7684\u503c\uff0c\u4e0e\u5176\u76f8\u5173\u7684 operation \u5c06\u4ea7\u751f\u4e00\u4e2a GraphQL \u9519\u8bef\u3002")),(0,o.kt)("h2",{id:"interface"},"interface"),(0,o.kt)("p",null,"\u4e00\u4e2a interface \u786e\u5b9a\u4e86\u591a\u4e2a\u5bf9\u8c61\u7c7b\u578b\u90fd\u53ef\u4ee5\u5305\u542b\u7684\u4e00\u6279\u5b57\u6bb5\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-graphql"},"interface Book {\n  title: String!\n  author: Author!\n}\n")),(0,o.kt)("p",null,"\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u7c7b\u578b",(0,o.kt)("inlineCode",{parentName:"p"},"implements"),"\u4e86\u4e00\u4e2a interface\uff0c\u5b83",(0,o.kt)("em",{parentName:"p"},"\u4e00\u5b9a"),"\u53ef\u4ee5\u5177\u5907 interface ",(0,o.kt)("em",{parentName:"p"},"\u6240\u6709"),"\u7684\u5b57\u6bb5\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-graphql"},"type Textbook implements Book {\n  title: String! # Must be present\n  author: Author! # Must be present\n  courses: [Course!]!\n}\n")),(0,o.kt)("p",null,"\u4e00\u4e2a\u5b57\u6bb5\u53ef\u4ee5\u5c06\u4e00\u4e2a interface(\u6216\u8005\u4e00\u4e2a interface \u7684\u5217\u8868)\u4f5c\u4e3a\u8fd4\u56de\u7c7b\u578b\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e2a\u5b57\u6bb5\u53ef\u4ee5\u8fd4\u56de\u4efb\u610f\u4e00\u4e2a",(0,o.kt)("inlineCode",{parentName:"p"},"implements"),"\u4e86\u8fd9\u4e2a interface \u7684\u5bf9\u8c61\u7c7b\u578b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-graphql"},"type Query {\n  books: [Book!]! # Can include Textbook objects\n}\n")),(0,o.kt)("h3",{id:"\u4f8b\u5b50-1"},"\u4f8b\u5b50"),(0,o.kt)("p",null,"\u4e0b\u9762\u7684 schema \u4e2d\u5b9a\u4e49\u4e86\u540d\u4e3a",(0,o.kt)("inlineCode",{parentName:"p"},"Book"),"\u7684 interface\uff0c\u5e76\u4e14\u6709\u4e24\u4e2a\u5bf9\u8c61\u7c7b\u578b implements \u4e86\u5b83\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-graphql"},"interface Book {\n  title: String!\n  author: Author!\n}\n\ntype Textbook implements Book {\n  title: String!\n  author: Author!\n  courses: [Course!]!\n}\n\ntype ColoringBook implements Book {\n  title: String!\n  author: Author!\n  colors: [String!]!\n}\n\ntype Query {\n  books: [Book!]!\n}\n")),(0,o.kt)("p",null,"\u5728\u8fd9\u4e2a scheme \u4e2d\uff0c",(0,o.kt)("inlineCode",{parentName:"p"},"Query.books"),"\u53ef\u4ee5\u8fd4\u56de\u5305\u542b",(0,o.kt)("inlineCode",{parentName:"p"},"Textbook"),"\u548c",(0,o.kt)("inlineCode",{parentName:"p"},"ColoringBook"),"\u7684\u5217\u8868\u3002"),(0,o.kt)("h3",{id:"\u67e5\u8be2\u4e00\u4e2a-interface"},"\u67e5\u8be2\u4e00\u4e2a interface"),(0,o.kt)("p",null,"\u5982\u679c\u4e00\u4e2a\u5b57\u6bb5\u7684\u7c7b\u578b\u662f interface\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u67e5\u8be2\u8fd9\u4e2a interface \u7684\u5b57\u6bb5\u4e2d\u7684\u4efb\u610f\u5b57\u6bb5\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-graphql"},"query GetBooks {\n  books {\n    title\n    author\n  }\n}\n")),(0,o.kt)("p",null,"\u5ba2\u6237\u7aef\u4e5f\u53ef\u4ee5\u67e5\u8be2\u8fd9\u4e2a interface \u6ca1\u6709\u5305\u542b\u7684\u5b57\u6bb5\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-graphql"},"query GetBooks {\n  books {\n    # Querying for __typename is almost always recommended,\n    # but it's even more important when querying a field that\n    # might return one of multiple types.\n    __typename\n    title\n    ... on Textbook {\n      courses {\n        # Only present in Textbook\n        name\n      }\n    }\n    ... on ColoringBook {\n      colors # Only present in ColoringBook\n    }\n  }\n}\n")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("a",{parentName:"p",href:"https://www.apollographql.com/docs/apollo-server/schema/schema/#the-__typename-field"},"\u4ec0\u4e48\u662f","_","_","typename \u5b57\u6bb5\uff1f"))),(0,o.kt)("p",null,"\u8fd9\u4e2a\u67e5\u8be2\u4f7f\u7528\u5185\u8054\u7247\u6bb5\u53bb\u67e5\u8be2",(0,o.kt)("inlineCode",{parentName:"p"},"Book"),"\u7684",(0,o.kt)("inlineCode",{parentName:"p"},"courses"),"\u5b57\u6bb5(\u5982\u679c\u5b83\u5c5e\u4e8e",(0,o.kt)("inlineCode",{parentName:"p"},"Textbook"),"\u7c7b\u578b)\u6216\u8005",(0,o.kt)("inlineCode",{parentName:"p"},"colors"),"\u5b57\u6bb5(\u5982\u679c\u5b83\u5c5e\u4e8e",(0,o.kt)("inlineCode",{parentName:"p"},"ColoringBook"),"\u7c7b\u578b)\u3002\u901a\u8fc7",(0,o.kt)("a",{parentName:"p",href:"https://www.apollographql.com/docs/react/data/fragments/#using-fragments-with-unions-and-interfaces"},"passing the possibleTypes option"),"\uff0cweb \u5ba2\u6237\u7aef\u53ef\u4ee5\u88ab\u544a\u77e5\u5173\u4e8e\u8fd9\u4e2a\u591a\u6001\u5173\u7cfb\u3002"),(0,o.kt)("p",null,"\u4e0b\u9762\u662f\u524d\u9762\u67e5\u8be2\u7684\u4e00\u4e2a\u6709\u6548\u7ed3\u679c\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "books": [\n      {\n        "__typename": "Textbook",\n        "title": "Wheelock\'s Latin",\n        "courses": [\n          {\n            "name": "Latin I"\n          }\n        ]\n      },\n      {\n        "__typename": "ColoringBook",\n        "title": "Oops All Water",\n        "colors": ["Blue"]\n      }\n    ]\n  }\n}\n')),(0,o.kt)("h3",{id:"\u89e3\u6790\u4e00\u4e2a-interface"},"\u89e3\u6790\u4e00\u4e2a interface"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u9605\u8bfb\u672c\u7ae0\u8282\u524d\uff0c\u5efa\u8bae\u4e86\u89e3",(0,o.kt)("a",{parentName:"p",href:"https://www.apollographql.com/docs/apollo-server/data/resolvers"},"resolver"))),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://www.apollographql.com/docs/apollo-server/schema/unions-interfaces#resolving-a-union"},"\u4e0e union \u7c7b\u578b\u76f8\u540c"),"\uff0cApollo Server \u9700\u6c42 interface \u5b9a\u4e49\u4e00\u4e2a",(0,o.kt)("inlineCode",{parentName:"p"},"__resolveType"),"\u51fd\u6570\u53bb\u786e\u5b9a\u90a3\u4e2a\u54ea\u4e00\u79cd\u5bf9\u8c61\u7c7b\u578b\u5c06\u4f1a\u88ab\u8fd4\u56de\u3002"),(0,o.kt)("p",null,"\u4e0b\u9762\u662f\u4e00\u4e2a",(0,o.kt)("inlineCode",{parentName:"p"},"Book"),"\u7684",(0,o.kt)("inlineCode",{parentName:"p"},"__resolveType"),"\u51fd\u6570\u7684\u4f8b\u5b50\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"const resolvers = {\n  Book: {\n    __resolveType(book, contextValue, info){\n      // Only Textbook has a courses field\n      if(book.courses){\n        return 'Textbook';\n      }\n      // Only ColoringBook has a colors field\n      if(book.colors){\n        return 'ColoringBook';\n      }\n      return null; // GraphQLError is thrown\n    },\n  },\n  Query: {\n    books: () => { ... }\n  },\n};\n")))}m.isMDXComponent=!0}}]);