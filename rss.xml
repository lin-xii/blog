<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>林十二XII 的 Blog Blog</title>
        <link>https://lin-xii.github.io/blog/</link>
        <description>林十二XII 的 Blog Blog</description>
        <lastBuildDate>Thu, 19 Oct 2023 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>zh-Hans</language>
        <copyright>Copyright © 2023 林十二XII 的 Blog</copyright>
        <item>
            <title><![CDATA[fix 413 Payload too large]]></title>
            <link>https://lin-xii.github.io/blog/2023/10月/413-payload-too-large</link>
            <guid>https://lin-xii.github.io/blog/2023/10月/413-payload-too-large</guid>
            <pubDate>Thu, 19 Oct 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[施工中]]></description>
            <content:encoded><![CDATA[<p>施工中</p>]]></content:encoded>
            <category>apollo</category>
            <category>apollo-server</category>
            <category>nginx</category>
            <category>express</category>
            <category>413</category>
        </item>
        <item>
            <title><![CDATA[GraphQL schema 基本概念]]></title>
            <link>https://lin-xii.github.io/blog/2023/10月/graphql-schema-basics</link>
            <guid>https://lin-xii.github.io/blog/2023/10月/graphql-schema-basics</guid>
            <pubDate>Fri, 13 Oct 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[一些对 schema 的理解。]]></description>
            <content:encoded><![CDATA[<p>一些对 schema 的理解。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tldr">TL;DR<a href="#tldr" class="hash-link" aria-label="TL;DR的直接链接" title="TL;DR的直接链接">​</a></h2><p>Schema 是一种描述数据结构的方式，与数据实际存储的方式、结构和实现技术无关。</p><ul><li>GraphQL uses a <strong>schema</strong> to describe the shape of data.</li><li>The schema defines a hierarchy of <strong>types</strong> with <strong>field</strong> that are populated from data stores.</li><li>The schema specifies exactly which <strong>queries</strong> and <strong>mutations</strong> are available for clients to excute.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="翻译">翻译<a href="#翻译" class="hash-link" aria-label="翻译的直接链接" title="翻译的直接链接">​</a></h2><p>GraphQL server 使用 <strong>schema</strong> 来描述数据结构。Schema 划分了 <strong>type</strong> 和 <strong>field</strong> 的层次结构，这些 field 通常是存储在后端数据库中的。Schema 还定义了客户端可以执行的 <strong>queries</strong> 和 <strong>mutations</strong>。</p><p>这篇文章介绍了 schema 的基本概念，以及如何创建一个 GraphQL server。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="original-docs">Original docs<a href="#original-docs" class="hash-link" aria-label="Original docs的直接链接" title="Original docs的直接链接">​</a></h2><p>Your GraphQL server uses a <strong>schema</strong> to describe the shape of your available data. This schema defines a hierarchy of <strong>types</strong> with <strong>fields</strong> that are populated from your back-end data stores. The schema also specifies exactly which <strong>queries</strong> and <strong>mutations</strong> are available for clients to execute.</p><p>This article describes the fundamental building blocks of a schema and how to create one for your GraphQL server.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="参考资料">参考资料<a href="#参考资料" class="hash-link" aria-label="参考资料的直接链接" title="参考资料的直接链接">​</a></h2><ol><li><a href="https://www.apollographql.com/docs/apollo-server/schema/schema" target="_blank" rel="noopener noreferrer">Apollo Server Docs</a></li></ol>]]></content:encoded>
            <category>Apollo Server</category>
            <category>GraphQL</category>
            <category>Basics</category>
        </item>
        <item>
            <title><![CDATA[GraphQL schema 命名习惯]]></title>
            <link>https://lin-xii.github.io/blog/2023/10月/naming-conventions</link>
            <guid>https://lin-xii.github.io/blog/2023/10月/naming-conventions</guid>
            <pubDate>Fri, 13 Oct 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[看了遍官方文档，总结了些常用的命名习惯。]]></description>
            <content:encoded><![CDATA[<p>看了遍官方文档，总结了些常用的命名习惯。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tldr">TL;DR<a href="#tldr" class="hash-link" aria-label="TL;DR的直接链接" title="TL;DR的直接链接">​</a></h2><p>GraphQL 规范并没有强制要求命名规范，但建议遵循以下规则：</p><ul><li><strong>Field names</strong>: <code>camelCase</code></li><li><strong>Enum values</strong>: <code>ALL_CAPS</code></li><li><strong>Type names</strong>: <code>PascalCase</code></li><li><strong>Enum names</strong>: <code>PascalCase</code></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="翻译">翻译<a href="#翻译" class="hash-link" aria-label="翻译的直接链接" title="翻译的直接链接">​</a></h2><p>GraphQL 规范没有强制要求命名规范。不过，建立命名规范有助于确保一致性。我们建议使用以下约定：</p><ul><li><strong>字段名称</strong>：<code>camelCase</code>。许多 GraphQL 客户端是用 JavaScript、Java、Kotlin 或者 Swift 开发的，这些语言中，变量通常使用驼峰命名法。</li><li><strong>枚举值</strong>：<code>ALL_CAPS</code>。枚举值和常量比较相似。</li><li><strong>类型名称</strong>：<code>PascalCase</code>。JavaScript 等语言，类名通常使用帕斯卡命名法。</li><li><strong>枚举名称</strong>：<code>PascalCase</code>。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="original-docs">Original docs<a href="#original-docs" class="hash-link" aria-label="Original docs的直接链接" title="Original docs的直接链接">​</a></h2><p>The GraphQL specification is flexible and doesn't impose specific naming guidelines. However, it's helpful to establish a set of conventions to ensure consistency across your organization. We recommend the following:</p><ul><li><strong>Field names</strong> should use <code>camelCase</code>. Many GraphQL clients are written in JavaScript, Java, Kotlin, or Swift, all of which recommend camelCase for variable names.</li><li><strong>Type names</strong> should use <code>PascalCase</code>. This matches how classes are defined in the languages mentioned above.</li><li><strong>Enum names</strong> should use <code>PascalCase</code>.</li><li><strong>Enum values</strong> should use <code>ALL_CAPS</code>, because they are similar to constants.</li></ul><p>These conventions help ensure that most clients don't need to define extra logic to transform the results returned by your server.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="参考资料">参考资料<a href="#参考资料" class="hash-link" aria-label="参考资料的直接链接" title="参考资料的直接链接">​</a></h2><ol><li><a href="https://www.apollographql.com/docs/apollo-server/schema/schema#naming-conventions" target="_blank" rel="noopener noreferrer">Apollo Server Docs</a></li><li><a href="https://github.com/graphql/graphql-spec" target="_blank" rel="noopener noreferrer">GraphQL Spec</a></li></ol>]]></content:encoded>
            <category>Apollo Server</category>
            <category>GraphQL</category>
            <category>Naming</category>
        </item>
        <item>
            <title><![CDATA[小破站第一篇blog]]></title>
            <link>https://lin-xii.github.io/blog/2023/10月/first-blog</link>
            <guid>https://lin-xii.github.io/blog/2023/10月/first-blog</guid>
            <pubDate>Wed, 11 Oct 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[静极思动，准备捡起来原来的 blog 计划了。]]></description>
            <content:encoded><![CDATA[<p>静极思动，准备捡起来原来的 blog 计划了。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="为什么写-blog">为什么写 blog<a href="#为什么写-blog" class="hash-link" aria-label="为什么写 blog的直接链接" title="为什么写 blog的直接链接">​</a></h2><p>大量的纸质笔记，查阅成本逐年升高。考虑将纸质笔记转移到互联网上，方便查阅。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="选择-blog">选择 blog<a href="#选择-blog" class="hash-link" aria-label="选择 blog的直接链接" title="选择 blog的直接链接">​</a></h2><p>为什么不用现成的，例如：</p><ul><li>印象笔记</li><li>语雀</li><li>掘金</li><li>infoQ</li><li>CSDN</li><li>博客园</li><li>知乎</li></ul><p>平台是助力，也是禁锢。希望我的文字，能让更多的人看到。</p>]]></content:encoded>
            <category>开篇</category>
        </item>
        <item>
            <title><![CDATA[前端视角的可观测性(二)]]></title>
            <link>https://lin-xii.github.io/blog/2023/7月/observability-frontend-2</link>
            <guid>https://lin-xii.github.io/blog/2023/7月/observability-frontend-2</guid>
            <pubDate>Thu, 27 Jul 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[高估自己了，opentelemetry 还差不少。沉淀一下，再写这种系列式的文章吧。]]></description>
            <content:encoded><![CDATA[<p>高估自己了，opentelemetry 还差不少。沉淀一下，再写这种系列式的文章吧。</p>]]></content:encoded>
            <category>前端</category>
            <category>可观测性</category>
            <category>一点想法</category>
        </item>
        <item>
            <title><![CDATA[前端视角的可观测性(一)]]></title>
            <link>https://lin-xii.github.io/blog/2023/7月/observability-frontend-1</link>
            <guid>https://lin-xii.github.io/blog/2023/7月/observability-frontend-1</guid>
            <pubDate>Wed, 26 Jul 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Gartner 将应用可观测性列为2023 年重要战略趋势之一。]]></description>
            <content:encoded><![CDATA[<p>Gartner 将<strong>应用可观测性</strong>列为<strong>2023 年重要战略趋势</strong>之一。</p><p>作为开发者, 即便没有专精此道。但了解一下，还是有必要的。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="前言">前言<a href="#前言" class="hash-link" aria-label="前言的直接链接" title="前言的直接链接">​</a></h2><p>最近，我所在的产品组，将完善监控系统，放入了版本规划中。</p><p>趁此良机，了解了一波<strong>可观测性</strong>相关的背景和技术。</p><p>同时，对原有的监控方式，进行了一定的改造。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="可观测性">可观测性<a href="#可观测性" class="hash-link" aria-label="可观测性的直接链接" title="可观测性的直接链接">​</a></h2><blockquote><p><a href="https://zh.wikipedia.org/wiki/%E6%8E%A7%E5%88%B6%E7%90%86%E8%AB%96" target="_blank" rel="noopener noreferrer">控制理论</a>中的<strong>可观察性</strong>（observability）是指<a href="https://zh.wikipedia.org/wiki/%E7%B3%BB%E7%B5%B1" target="_blank" rel="noopener noreferrer">系统</a>可以由其外部输出推断其其内部<a href="https://zh.wikipedia.org/wiki/%E7%8B%80%E6%85%8B%E7%A9%BA%E9%96%93" target="_blank" rel="noopener noreferrer">状态</a>的程度。系统的可观察性和<a href="https://zh.wikipedia.org/wiki/%E5%8F%AF%E6%8E%A7%E5%88%B6%E6%80%A7" target="_blank" rel="noopener noreferrer">可控制性</a>是数学上<a href="https://zh.wikipedia.org/wiki/%E5%AF%B9%E5%81%B6_(%E6%95%B0%E5%AD%A6)" target="_blank" rel="noopener noreferrer">对偶</a>的概念。可观察性最早是匈牙利裔工程师<a href="https://zh.wikipedia.org/wiki/%E9%B2%81%E9%81%93%E5%A4%AB%C2%B7%E5%8D%A1%E5%B0%94%E6%9B%BC" target="_blank" rel="noopener noreferrer">鲁道夫·卡尔曼</a>针对线性动态系统提出的概念[<a href="https://zh.wikipedia.org/zh-hans/%E5%8F%AF%E8%A7%80%E6%B8%AC%E6%80%A7#cite_note-1" target="_blank" rel="noopener noreferrer">1<!-- -->]</a>[<a href="https://zh.wikipedia.org/zh-hans/%E5%8F%AF%E8%A7%80%E6%B8%AC%E6%80%A7#cite_note-2" target="_blank" rel="noopener noreferrer">2<!-- -->]</a>。若以<a href="https://zh.wikipedia.org/wiki/%E4%BF%A1%E5%8F%B7%E6%B5%81%E5%9B%BE" target="_blank" rel="noopener noreferrer">信号流图</a>来看，若所有的内部状态都可以输出到输出信号，此系统即有可观察性。</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="什么是可观测性">什么是可观测性？<a href="#什么是可观测性" class="hash-link" aria-label="什么是可观测性？的直接链接" title="什么是可观测性？的直接链接">​</a></h3><blockquote><p>可观测性是指能够通过检查系统或应用的输出、日志和性能指标来监控、测量和理解系统或应用的状态。</p></blockquote><p>讲人话，我理解就是将传统监控系统的日志，进行了标准化、体系化。同时，将原来“孤岛式”的日志进行了“关联”。将所有日志组合成整体，以此来分析系统状态。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="为什么会出现或者说为什么现在火了">为什么会出现？或者说，为什么现在火了？<a href="#为什么会出现或者说为什么现在火了" class="hash-link" aria-label="为什么会出现？或者说，为什么现在火了？的直接链接" title="为什么会出现？或者说，为什么现在火了？的直接链接">​</a></h3><p>监控系统并不是什么稀罕事务，但为什么之前没有什么热度呢？</p><p>我认为，是排查问题的门槛，变高了。变高的原因，主要有 2 方面：</p><ol><li>系统复杂度</li><li>数据量</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="系统复杂度">系统复杂度<a href="#系统复杂度" class="hash-link" aria-label="系统复杂度的直接链接" title="系统复杂度的直接链接">​</a></h4><p>首先，是系统的复杂度在不断上升。单机软件、集群部署、云服务、虚拟化。</p><p>软件部署方式的每一次升级，都在提升软件系统的整体能力。</p><p>与此同时，一旦出现问题，排查&amp;解决问题的难度，也在不断上升。如果身边有运维同学，可以听他们讲一讲，独属于他们的、深夜里的故事 🤣</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="数据量">数据量<a href="#数据量" class="hash-link" aria-label="数据量的直接链接" title="数据量的直接链接">​</a></h4><p>从计算机诞生，我们已经经历了单机软件、局域网、互联网，且身处<strong>移动互联网</strong>。</p><p>在网络高度普及的今天，软件和服务，包裹着每一个<strong>网民</strong>。网络触手的延伸，在提供了高度便利的同时，也给数据量带来了井喷式的增长。这给问题排查，增加了不小的难度。</p><p>当下，我们身处<strong>移动互联网</strong>的上半场，当摄像头、家用电器、车载系统和新基建中无处不在的传感器入网后，在移动互联网的下半场（IoT），数据量的暴增，是可以预见的。</p><p>所以，传统监控系统相对片面、局部的监控指标，无法满足复杂环境下的系统状态监控、问题排查和系统调优。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="怎么用">怎么用？<a href="#怎么用" class="hash-link" aria-label="怎么用？的直接链接" title="怎么用？的直接链接">​</a></h3><p>Opentelemetry、Prometheus、Grafana、Jaeger 等等。现在已经有很多成熟的开源工具可供集成、或二次定制开发。也有不少收费的平台，方便使用。</p><p>通过这些可观测性工具，可以</p><ol><li>更加全面的监控系统指标</li><li>更清晰的分析调用链条</li><li>更准确、更有把握的的优化系统瓶颈点</li></ol><p>这些不是空口白话，我们产品在初步集成 Jaeger 后，已经发现了几处有价值的隐藏问题。这在原来，只能通过大规模的压力测试（如果有）、客户现场反馈来发现、修复。</p><p>后边有机会（如果不鸽），会分享一些脱敏的相关实践。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="一点想法">一点想法<a href="#一点想法" class="hash-link" aria-label="一点想法的直接链接" title="一点想法的直接链接">​</a></h2><p>这周，集成进系统的 Jaeger 基本可用了。通过和后端师傅的交流，发现了几处隐藏的问题，挺开心的。</p><p>虽然有些马后炮了，但在毕业不久的时候，就有对完善的监控体系的期待了。可惜，当时虽然有考虑过监控系统的雏形，但只停留在想象中了。现实里的时间，都去打游戏了。。。</p><p>总之，<strong>Observability</strong>相关的技术, <strong>不是</strong>颠覆传统监控系统的<strong>银弹</strong>。</p><p>在我看来，更像是<strong>应运而生</strong>。是对传统监控体系的完善、补充和升级。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="参考资料">参考资料<a href="#参考资料" class="hash-link" aria-label="参考资料的直接链接" title="参考资料的直接链接">​</a></h2><ol><li><a href="https://zh.wikipedia.org/zh-hans/%E5%8F%AF%E8%A7%80%E6%B8%AC%E6%80%A7" target="_blank" rel="noopener noreferrer">wiki</a></li><li><a href="https://www.redhat.com/zh/topics/devops/what-is-observability" target="_blank" rel="noopener noreferrer">RedHat</a></li></ol>]]></content:encoded>
            <category>前端</category>
            <category>可观测性</category>
            <category>一点想法</category>
        </item>
        <item>
            <title><![CDATA[几种验证端口开启的方法]]></title>
            <link>https://lin-xii.github.io/blog/2023/7月/port-tool</link>
            <guid>https://lin-xii.github.io/blog/2023/7月/port-tool</guid>
            <pubDate>Tue, 25 Jul 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[macOS 下, 验证服务器端口是否连通的方法]]></description>
            <content:encoded><![CDATA[<p>macOS 下, 验证服务器端口是否连通的方法</p><ul><li><a href="#telnet">telnet</a></li><li><a href="#netcat(nc)">nc</a></li><li><a href="#nmap">nmap</a></li></ul><p><strong>tip: 扫描端口时，需要注意不要违反网络安全规定，避免对他人的网络造成不必要的干扰和损害。</strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="背景">背景<a href="#背景" class="hash-link" aria-label="背景的直接链接" title="背景的直接链接">​</a></h2><p>网络相关的记忆, 都就着饭吃到肚子里了 🙄</p><p>今天需要验证服务器端口是否可以连通, 找到了几种方法, 简单记录一下</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="telnet">telnet<a href="#telnet" class="hash-link" aria-label="telnet的直接链接" title="telnet的直接链接">​</a></h2><blockquote><p><code>telnet</code> 命令是一个用于测试网络连接的工具，可以模拟客户端与服务器之间的连接，以检查服务器端口是否可以正常连接。<code>telnet</code> 命令最初是由美国计算机科学家 Simon S. Lam 开发的，用于在 UNIX 系统上测试网络连接。后来，<code>telnet</code> 命令被广泛应用于各种操作系统和网络设备中，成为了一种通用的网络测试工具。</p><p><code>telnet</code> 命令可以通过终端或命令行界面使用，可以连接到任何支持 TCP 或 UDP 协议的服务器，以测试服务器端口是否可以正常连接。<code>telnet</code> 命令可以模拟客户端与服务器之间的连接，可以发送和接收数据，以检查服务器的响应是否正常。<code>telnet</code> 命令通常用于测试 Web 服务器、邮件服务器、FTP 服务器等等，以确保这些服务器可以正常工作。</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装">安装<a href="#安装" class="hash-link" aria-label="安装的直接链接" title="安装的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="macos-m1">macOS M1<a href="#macos-m1" class="hash-link" aria-label="macOS M1的直接链接" title="macOS M1的直接链接">​</a></h4><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">brew </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> telnet</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="使用">使用<a href="#使用" class="hash-link" aria-label="使用的直接链接" title="使用的直接链接">​</a></h3><ol><li>打开 terminal</li><li>输入命令<code>telnet server port</code>. Eg: <code> telnet localhost 5910</code></li><li>敲回车</li><li>如果出现下方格式的内容, 证明相应的服务、端口可以连通</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Trying ::1</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Connected to localhost.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Escape character is </span><span class="token string" style="color:#e3116c">'^]'</span><span class="token builtin class-name">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="5"><li>按下<code>ctrl + ]</code>, 再输入<code>quit</code>, 回车. 即可退出 telnet 命令</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="netcatnc">netcat(nc)<a href="#netcatnc" class="hash-link" aria-label="netcat(nc)的直接链接" title="netcat(nc)的直接链接">​</a></h2><blockquote><p><code>nc</code> 命令是一个用于测试网络连接的工具，也称为 netcat。它可以用于创建 TCP 或 UDP 连接，发送和接收数据，以及监听端口等操作。<code>nc</code> 命令最初是由开发者 <em>Hobbit</em> 开发的，后来被其他开发者维护和扩展，成为了一个通用的网络工具。</p><p><code>nc</code> 命令是开源的，可以在 GitHub 上找到相关的源代码。<code>nc</code> 命令的源代码托管在多个仓库中，其中一些仓库包含了不同版本的 <code>nc</code> 命令实现</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装-1">安装<a href="#安装-1" class="hash-link" aria-label="安装的直接链接" title="安装的直接链接">​</a></h3><p>macOS 13.4 自带 nc, 无需安装</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="使用-1">使用<a href="#使用-1" class="hash-link" aria-label="使用的直接链接" title="使用的直接链接">​</a></h3><ol><li>打开 terminal</li><li>输入<code>nc -zv localhost 5910</code>, 敲回车</li><li>如果出现如下格式的信息, 证明连接成功</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Connection to localhost port </span><span class="token number" style="color:#36acaa">5910</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">tcp/*</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> succeeded</span><span class="token operator" style="color:#393A34">!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>如果出现如下格式的信息, 则连接失败</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nc: connectx to localhost port </span><span class="token number" style="color:#36acaa">5911</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tcp</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> failed: Connection refused</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="常用参数">常用参数<a href="#常用参数" class="hash-link" aria-label="常用参数的直接链接" title="常用参数的直接链接">​</a></h3><blockquote><p><code>-zv</code> 参数表示在扫描端口时，不发送数据，只显示详细信息。<code>-z</code> 参数表示只扫描端口，不发送数据，<code>-v</code> 参数表示显示详细信息。因此，<code>-zv</code> 参数的含义是只扫描端口，并显示详细信息，但不发送数据。这个参数通常用于快速检查服务器端口是否开启。</p></blockquote><ul><li><code>-l</code>：监听模式，用于在指定端口上监听连接请求。</li><li><code>-p</code>：指定端口号。</li><li><code>-u</code>：使用 UDP 协议。</li><li><code>-w</code>：设置超时时间。</li><li><code>-z</code>：只扫描端口，不发送数据。</li><li><code>-v</code>：显示详细信息。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="nmap">nmap<a href="#nmap" class="hash-link" aria-label="nmap的直接链接" title="nmap的直接链接">​</a></h2><blockquote><p><code>nmap</code> 命令是一个用于网络探测和安全审计的工具，可以用于扫描主机和端口，识别操作系统和服务等。<code>nmap</code> 命令最初是由开发者 Fyodor（Gordon Lyon）开发的，后来被其他开发者维护和扩展，成为了一个通用的网络工具。</p><p><code>nmap</code> 命令是开源的，您可以在 GitHub 上找到相关的源代码。<code>nmap</code> 命令的源代码托管在官方的 Git 仓库中，您可以通过以下链接访问：</p><ul><li>[https://github.com/nmap/nmap]<!-- -->(vscode-file://vscode-app/Applications/Visual Studio Code - Insiders.app/Contents/Resources/app/out/vs/code/electron-sandbox/workbench/workbench.html)</li></ul></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装-2">安装<a href="#安装-2" class="hash-link" aria-label="安装的直接链接" title="安装的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="macos-m1-1">macOS M1<a href="#macos-m1-1" class="hash-link" aria-label="macOS M1的直接链接" title="macOS M1的直接链接">​</a></h4><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">brew </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> nmap</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="使用-2">使用<a href="#使用-2" class="hash-link" aria-label="使用的直接链接" title="使用的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="扫描常用端口">扫描常用端口<a href="#扫描常用端口" class="hash-link" aria-label="扫描常用端口的直接链接" title="扫描常用端口的直接链接">​</a></h4><ol><li>打开 terminal</li><li>输入<code>nmap localhost</code>, 敲回车</li><li>显示结果(默认只扫描常用的 1000 个端口)</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Starting Nmap </span><span class="token number" style="color:#36acaa">7.94</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> https://nmap.org </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> at </span><span class="token number" style="color:#36acaa">2023</span><span class="token plain">-07-19 </span><span class="token number" style="color:#36acaa">11</span><span class="token plain">:04 CST</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nmap scan report </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> localhost </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Host is up </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">.000047s latency</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Other addresses </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> localhost </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">not scanned</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">: ::1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Not shown: </span><span class="token number" style="color:#36acaa">995</span><span class="token plain"> closed tcp ports </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">conn-refused</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PORT     STATE SERVICE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">5910</span><span class="token plain">/tcp </span><span class="token function" style="color:#d73a49">open</span><span class="token plain">  cm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">8080</span><span class="token plain">/tcp </span><span class="token function" style="color:#d73a49">open</span><span class="token plain">  http-proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nmap done: </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> IP address </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">host</span><span class="token plain"> up</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> scanned </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.04</span><span class="token plain"> seconds</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="扫描指定端口">扫描指定端口<a href="#扫描指定端口" class="hash-link" aria-label="扫描指定端口的直接链接" title="扫描指定端口的直接链接">​</a></h4><ol><li>打开 terminal</li><li>输入<code>nmap -p 5910 localhost</code>, 敲回车</li><li>显示结果</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Starting Nmap </span><span class="token number" style="color:#36acaa">7.94</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> https://nmap.org </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> at </span><span class="token number" style="color:#36acaa">2023</span><span class="token plain">-07-19 </span><span class="token number" style="color:#36acaa">11</span><span class="token plain">:18 CST</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nmap scan report </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> localhost </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Host is up </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">.00023s latency</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Other addresses </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> localhost </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">not scanned</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">: ::1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PORT     STATE SERVICE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">5910</span><span class="token plain">/tcp </span><span class="token function" style="color:#d73a49">open</span><span class="token plain">  cm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nmap done: </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> IP address </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">host</span><span class="token plain"> up</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> scanned </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.02</span><span class="token plain"> seconds</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>端口</category>
            <category>工具</category>
        </item>
        <item>
            <title><![CDATA[GraphQL插件踩坑]]></title>
            <link>https://lin-xii.github.io/blog/2023/7月/vscode-extension-graphql</link>
            <guid>https://lin-xii.github.io/blog/2023/7月/vscode-extension-graphql</guid>
            <pubDate>Sat, 15 Jul 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[- vscode 的 GraphQL 语法插件, 目前比较推荐Graphql Foundation的GraphQL: Language Feature Support]]></description>
            <content:encoded><![CDATA[<ul><li><p>vscode 的 GraphQL 语法插件, 目前比较推荐<strong>Graphql Foundation</strong>的<strong>GraphQL: Language Feature Support</strong></p></li><li><p>相关配置, 见<!-- -->[GraphQL: Language Feature Support]<!-- -->(# GraphQL: Language Feature Support)</p></li><li><p>配置文件的语法规则, 参考<a href="https://the-guild.dev/graphql/config/docs" target="_blank" rel="noopener noreferrer">GraphQL Config</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="背景">背景<a href="#背景" class="hash-link" aria-label="背景的直接链接" title="背景的直接链接">​</a></h2><p>之前用的 GraphQL 插件, 只开启了语法高亮. 自己写的 schema 没什么问题, 排查问题时, 只能靠搜索, 太难了....</p><p>vscode 有不少语法提示插件, 但很多不太适用了. 试用了几款, 踩了踩坑...</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="插件">插件<a href="#插件" class="hash-link" aria-label="插件的直接链接" title="插件的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="graphql-language-feature-support"><a href="https://marketplace.visualstudio.com/items?itemName=GraphQL.vscode-graphql" target="_blank" rel="noopener noreferrer">GraphQL: Language Feature Support</a><a href="#graphql-language-feature-support" class="hash-link" aria-label="graphql-language-feature-support的直接链接" title="graphql-language-feature-support的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># graphql.config.yml  //in root directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 使用URL的方式, 只有语法提示, 没有定义跳转</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># schema: http://localhost:5910/graphql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - ./bff/src/schemas/*.gql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - ./bff/src/schemas/**/*.gql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - ./bff/src/schemas/**/**/*.gql</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>需要按照 graphql-config 的格式, 添加配置文件</li><li>有语法提示、支持定义跳转</li><li>目前仍在维护</li><li>唯一可惜的是, <strong>没有引用查询</strong></li></ul><p>有常规的语法提示了, 而且自定义类型也可以提示. 支持定义跳转</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="vscode-graphql"><del><a href="https://marketplace.visualstudio.com/items?itemName=luyizhi.vscode-graphql" target="_blank" rel="noopener noreferrer">vscode-graphql</a></del><a href="#vscode-graphql" class="hash-link" aria-label="vscode-graphql的直接链接" title="vscode-graphql的直接链接">​</a></h3><ul><li>个人开发者插件, 坚持与否, 全看心情</li><li>上一次的发布时间, 在 2019 年... 验证了第一条</li><li><a href="http://git.iemmp.com/yizhi/vscode-graphql.git" target="_blank" rel="noopener noreferrer">插件代码库 (iemmp.com)</a> 已经丢失了.......</li><li>按照 quick start 配置<ul><li>有高亮, 但是不太符合预期</li><li>有语法提示</li><li><del>没有定义跳转</del></li></ul></li></ul><p>整体效果不是很理想, 故放弃</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="apollo-graphql"><del><a href="https://marketplace.visualstudio.com/items?itemName=apollographql.vscode-apollo" target="_blank" rel="noopener noreferrer">Apollo GraphQL</a></del><a href="#apollo-graphql" class="hash-link" aria-label="apollo-graphql的直接链接" title="apollo-graphql的直接链接">​</a></h3><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// module.exports = {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//   client: {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//     service: {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//       name: "my-service-name",</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//       localSchemaFile: "./src/schemas/*.graphql",</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//     },</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//   },</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// };</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// module.exports = {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//   client: {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//     service: {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//       name: "github",</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//       url: "http://localhost:5910/graphql",</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//       // optional headers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//       headers: {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//         authorization: "Bearer lkjfalkfjadkfjeopknavadf",</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//       },</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//       // optional disable SSL validation check</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//       skipSSLValidation: true,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//     },</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//   },</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// };</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">service</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">endpoint</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">url</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"http://localhost:5910/graphql"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">headers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// optional</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">authorization</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Bearer lkjfalkfjadkfjeopknavadf"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">skipSSLValidation</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// optional, disables SSL validation check</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// export default {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//   service: {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//     endpoint: {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//       url: "http://localhost:5910/graphql",</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//       headers: {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//         // optional</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//         authorization: "Bearer lkjfalkfjadkfjeopknavadf",</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//       },</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//       skipSSLValidation: true, // optional, disables SSL validation check</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//     },</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//   },</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// };</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>不支持 es module</li><li>更新时间还在 22 年</li><li>issue 关闭速度相当一般...</li></ul><p>搞了半天, 只有语法高亮, 没有定义跳转... 也可能是我太菜了 😭</p><p>配置文件加载总是不成功. .js 因为 es module 不能用, .cjs 加载不上...</p><p>评论区也有吐槽配置不生效的, 不折腾了...</p>]]></content:encoded>
            <category>vscode</category>
            <category>插件</category>
            <category>GraphQL</category>
        </item>
        <item>
            <title><![CDATA[一些剁手前的分析]]></title>
            <link>https://lin-xii.github.io/blog/2023/6月/buy</link>
            <guid>https://lin-xii.github.io/blog/2023/6月/buy</guid>
            <pubDate>Thu, 29 Jun 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[显示器]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="显示器">显示器<a href="#显示器" class="hash-link" aria-label="显示器的直接链接" title="显示器的直接链接">​</a></h2><p>42、4k 可以接受</p><p>因为用<strong>U2422HX</strong>纵向使用, 发现看 log、shell 真爽</p><p>根据 U2422HX 的尺寸 53.6x36.4, 再结合 LG C3 的尺寸, 93.2x57.7. 尺寸可以接受</p><p>唯一需要考虑的, 就是桌子的深度. 60 有些勉强, 因为需要考虑显示器支架的深度. 所以, 80 是比较合理的一个预想值</p><p>标准:</p><ul><li>4k</li><li>42 英寸</li><li>桌子&gt;60cm 的深度</li></ul><p>目前可用的选项</p><ul><li>LG C3 42</li><li>ROG PG42UQ</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ipad---m-芯片的-mini--pro-11">iPad -&gt; M 芯片的 mini / pro 11<a href="#ipad---m-芯片的-mini--pro-11" class="hash-link" aria-label="iPad -> M 芯片的 mini / pro 11的直接链接" title="iPad -> M 芯片的 mini / pro 11的直接链接">​</a></h2><p>12.9、11、air、mini、ipad 10、ipad 9:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cpu">CPU<a href="#cpu" class="hash-link" aria-label="CPU的直接链接" title="CPU的直接链接">​</a></h3><p>pro、air、mini、iPad, 依次递减一个代系的 CPU</p><p>M2、M1、A15、A14、A13</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="屏幕">屏幕<a href="#屏幕" class="hash-link" aria-label="屏幕的直接链接" title="屏幕的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="129--11--105">12.9 &gt; 11 &gt; 10.5<a href="#129--11--105" class="hash-link" aria-label="12.9 > 11 > 10.5的直接链接" title="12.9 > 11 > 10.5的直接链接">​</a></h4><ul><li>12.9 相比 11, XDR 和尺寸. 但没什么必要. 太大了, 反而不如直接上 MBP 了. 虽然 ipad 看起来方便, 但是系统并没那么方便</li><li>10.5 和这俩相比, 就分辨率低了点, cpu 啥的硬件老了点, 别的区别不大<ul><li>显示效果, 应该差距就还好</li><li>所以, 显示效果, 依旧标杆. 不用为了显示效果去换 ipad</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="airmini">Air、mini<a href="#airmini" class="hash-link" aria-label="Air、mini的直接链接" title="Air、mini的直接链接">​</a></h4><p>刀法也够精准的...</p><p>promotion 都砍一刀、mini 的 cpu 再砍一刀...服了</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ipad">iPad<a href="#ipad" class="hash-link" aria-label="iPad的直接链接" title="iPad的直接链接">​</a></h4><p>屏幕素质又砍了一刀, 没有 P3 广色域了...</p><p>抗反射涂层也没了</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="键盘">键盘<a href="#键盘" class="hash-link" aria-label="键盘的直接链接" title="键盘的直接链接">​</a></h3><p>不需要了. 没有用 ipad pro 或者 ipad mini 写代码的需求. 真要有, filco 和后买的这个红轴, 蓝牙都能用.</p><p>出差? 你出差用 ipad 干活么? 肯定带着 mbp 啊. 怎么会用 ipad 写代码...</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="笔">笔<a href="#笔" class="hash-link" aria-label="笔的直接链接" title="笔的直接链接">​</a></h3><p>二代的笔可以磁吸了, 倒是可以考虑下. 看 pdf? 或许吧</p><p>所以啊. 不特意给老妈买 ipad 了. 我买旗舰, 老大用个二手旗舰吧还是</p><p>ipad mini 的尺寸, 确实更适合偶尔看看. ipad pro, 还是大了点.</p><p>人啊, 总想用更小的体积, 却能得到更大的视野. 看起来, 只有 vision pro 能做到</p><p>Air2、10.5 如果不出问题, 就不换了. 真出了问题, 再考虑换吧. 到时候, 再去费这个心吧.</p><p>希望后边, 能有 M 芯片的 mini</p>]]></content:encoded>
            <category>剁手</category>
            <category>买买买</category>
        </item>
        <item>
            <title><![CDATA[TS Array.reduce没有与此调用匹配的重载?]]></title>
            <link>https://lin-xii.github.io/blog/2023/6月/TS-Array-reduce-error</link>
            <guid>https://lin-xii.github.io/blog/2023/6月/TS-Array-reduce-error</guid>
            <pubDate>Fri, 16 Jun 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[语法检查工具，是个好东西。]]></description>
            <content:encoded><![CDATA[<p>语法检查工具，是个好东西。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="起因">起因<a href="#起因" class="hash-link" aria-label="起因的直接链接" title="起因的直接链接">​</a></h2><p>一个 feature 开发, 结果需求评审、工时预估, 简直是事故级别的. 最后, 迫于无奈, 全组人都得上去救火...</p><p>今天, 帮忙改 bug 的时候, 发现新 checkout 下来的代码, 还带着新鲜的语法错误...简直大无语.</p><p>翻了遍代码, 发现很多地方都存在 Array.reduce 类型重载相关的问题, 简单记录一下解决过程.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="排查过程">排查过程<a href="#排查过程" class="hash-link" aria-label="排查过程的直接链接" title="排查过程的直接链接">​</a></h2><blockquote><p>大家的 vscode 都不装语法提示插件么? 代码挂着红线, 就扔代码库了??? 抽时间, 得把 hook 安排上了 🙄</p></blockquote><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 业务代码不方便外流, 简单写了个demo, 问题原因相同</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> nums </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> sum </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> nums</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pre</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cur</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">...</span><span class="token plain">pre</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> count</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> cur </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sum</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> count</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sum</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 这段代码, 编译成.js后, 其实是可以运行的. 但如果装了插件, 可以看到明显的TS语法错误..</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 输出值</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// [</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//   { count: 0 },</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//   { count: 1 },</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//   { count: 2 },</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//   { count: 3 },</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//   { count: 4 },</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//   { count: 5 },</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//   { count: 6 }</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>(pre, cur)=&gt;{}</code> 会提示没有对应的重载类型. 原因不复杂, 就是类型不符合推导预期, 但为什么不符合预期, 还真没仔细看过. 本着 fixbug 可以, 但不能一无所获的思想, 查看了对应的 TS 类型声明</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 3种reduce的类型声明</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function-variable function" style="color:#d73a49">callbackfn</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">previousValue</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> currentValue</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> currentIndex</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> array</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function-variable function" style="color:#d73a49">callbackfn</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">previousValue</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> currentValue</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> currentIndex</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> array</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> initialValue</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token generic-function function" style="color:#d73a49">reduce</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name constant" style="color:#36acaa">U</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function-variable function" style="color:#d73a49">callbackfn</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">previousValue</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">U</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> currentValue</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> currentIndex</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> array</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">U</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> initialValue</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">U</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">U</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>很明显, reduce 对类型的推导, 基本就是, 「参数类型」和「返回值类型」相同、且 reduce 前后, 只有一种类型, 那不用加「泛型」</p><p>但是, 如果出现<strong>1 种以上的类型, 且 preValue 与 initValue、returnType 类型不同</strong>, 就必须显式标注类型.</p><p>案例中, pre 的类型为<code>never[]</code>, cur 的类型是<code>number</code>, 而 reduce 的返回值类型是<code>Array&lt;{ count: number }&gt;</code>. 根据之前推导的结论, 出现 3 种类型, 且 pre 与 cur、return 值类型不同, 必须显式声明类型.</p><p>根据 TS 的类型声明, 有 2 种可用的解决方法:</p><ol><li>给 initValue 增加类型断言, <code>[] as Array&lt;{ count: number }&gt;</code>.</li><li>在 reduce 处, 声明泛型类型<code>nums.reduce&lt;Array&lt;{ count: number }&gt;&gt;</code></li></ol><p>核心解决思路: 减少 TSC 推导类型的种类, 促使其符合已存在的类型定义.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="吐槽">吐槽<a href="#吐槽" class="hash-link" aria-label="吐槽的直接链接" title="吐槽的直接链接">​</a></h2><blockquote><p>只要思想不滑坡, 办法总比困难多</p></blockquote><p>问题很直观, 也不复杂. 但看 log, 这语法问题已经存在 2 个月了, 真的是 vscode 没装插件么?</p>]]></content:encoded>
            <category>Typescript</category>
            <category>Array.reduce</category>
            <category>泛型</category>
        </item>
    </channel>
</rss>