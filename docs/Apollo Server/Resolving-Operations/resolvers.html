<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Apollo Server/Resolving-Operations/resolvers" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Resolvers | æ—åäºŒXII çš„ Blog</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://lin-xii.github.io/blog/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://lin-xii.github.io/blog/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://lin-xii.github.io/blog/docs/Apollo Server/Resolving-Operations/resolvers"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="keywords" content="lin-xii,æ—åäºŒ,æ—åäºŒXII,blog,åšå®¢,å°ç ´ç«™"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Resolvers | æ—åäºŒXII çš„ Blog"><meta data-rh="true" name="description" content="Apollo Server éœ€è¦çŸ¥é“å¦‚ä½•ä¸º schema ä¸­çš„æ¯ä¸ªå­—æ®µå¡«å……æ•°æ®ï¼Œä»¥è®©å®ƒå¯ä»¥å“åº”æŸ¥è¯¢æ•°æ®çš„è¯·æ±‚ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œå®ƒä½¿ç”¨ resolverã€‚"><meta data-rh="true" property="og:description" content="Apollo Server éœ€è¦çŸ¥é“å¦‚ä½•ä¸º schema ä¸­çš„æ¯ä¸ªå­—æ®µå¡«å……æ•°æ®ï¼Œä»¥è®©å®ƒå¯ä»¥å“åº”æŸ¥è¯¢æ•°æ®çš„è¯·æ±‚ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œå®ƒä½¿ç”¨ resolverã€‚"><link data-rh="true" rel="icon" href="/blog/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://lin-xii.github.io/blog/docs/Apollo Server/Resolving-Operations/resolvers"><link data-rh="true" rel="alternate" href="https://lin-xii.github.io/blog/docs/Apollo Server/Resolving-Operations/resolvers" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://lin-xii.github.io/blog/docs/Apollo Server/Resolving-Operations/resolvers" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="æ—åäºŒXII çš„ Blog RSS Feed">




<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0F0ZD1DZPN"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-0F0ZD1DZPN",{anonymize_ip:!0})</script><link rel="stylesheet" href="/blog/assets/css/styles.1b75ee4d.css">
<link rel="preload" href="/blog/assets/js/runtime~main.47953451.js" as="script">
<link rel="preload" href="/blog/assets/js/main.a22a5db0.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="è·³åˆ°ä¸»è¦å†…å®¹"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">è·³åˆ°ä¸»è¦å†…å®¹</a></div><nav aria-label="ä¸»å¯¼èˆª" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="åˆ‡æ¢å¯¼èˆªæ " aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/blog/"><div class="navbar__logo"><img src="/blog/img/avatar.JPG" alt="Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/blog/img/avatar.JPG" alt="Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">æ—åäºŒXII</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog/">Blog</a><a class="navbar__item navbar__link" href="/blog/tags">Tags</a><a class="navbar__item navbar__link" href="/blog/docs/Apollo Server/Introduction">Apollo Server ä¸­æ–‡æ–‡æ¡£</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/lin-xii" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-label="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="å›åˆ°é¡¶éƒ¨" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="æ–‡æ¡£ä¾§è¾¹æ " class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/blog/docs/Apollo Server/Introduction">Apollo Server</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/Apollo Server/Introduction">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" tabindex="0" href="/blog/docs/Apollo Server/Defining a schema/graphql-schema-basics">Defining a schema</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/Apollo Server/Defining a schema/graphql-schema-basics">Schema basics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/Apollo Server/Defining a schema/union-and-interface">Unions and interfaces</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/Apollo Server/Defining a schema/custom-scalars">Custom scalars</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/Apollo Server/Defining a schema/directives">Directives</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/blog/docs/Apollo Server/Resolving-Operations/resolvers">Resolving-Operations</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/blog/docs/Apollo Server/Resolving-Operations/resolvers">Resolvers</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/blog/docs/about-me">å…³äºæˆ‘</a></li></ul></nav><button type="button" title="æ”¶èµ·ä¾§è¾¹æ " aria-label="æ”¶èµ·ä¾§è¾¹æ " class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="é¡µé¢è·¯å¾„"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ä¸»é¡µé¢" class="breadcrumbs__link" href="/blog/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Apollo Server</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Resolving-Operations</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Resolvers</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">æœ¬é¡µæ€»è§ˆ</button></div><div class="theme-doc-markdown markdown"><header><h1>Resolvers</h1></header><p>Apollo Server éœ€è¦çŸ¥é“å¦‚ä½•ä¸º schema ä¸­çš„æ¯ä¸ªå­—æ®µå¡«å……æ•°æ®ï¼Œä»¥è®©å®ƒå¯ä»¥å“åº”æŸ¥è¯¢æ•°æ®çš„è¯·æ±‚ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œå®ƒä½¿ç”¨ resolverã€‚</p><p><strong>resolver æ˜¯ä¸€ä¸ªè´Ÿè´£ç»™ schema ä¸­å•ä¸ªå­—æ®µå¡«å……æ•°æ®çš„å‡½æ•°ã€‚</strong>å®ƒå¯ä»¥å¡«å……ä»¥ä»»ä½•æ–¹å¼å®šä¹‰çš„æ•°æ®ï¼Œä¾‹å¦‚æŸ¥è¯¢åç«¯æ•°æ®åº“æˆ–è€…ç¬¬ä¸‰æ–¹ APIã€‚</p><blockquote><p>å¦‚æœä¸ä¸ºç‰¹å®šå­—æ®µå®šä¹‰ resolverï¼ŒApollo Server å°†ä¸ºè¿™ä¸ªå­—æ®µå®šä¹‰ä¸€ä¸ª<a href="https://www.apollographql.com/docs/apollo-server/data/resolvers#default-resolvers" target="_blank" rel="noopener noreferrer">default resolver</a>ã€‚</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å®šä¹‰-resolver">å®šä¹‰ resolver<a href="#å®šä¹‰-resolver" class="hash-link" aria-label="å®šä¹‰ resolverçš„ç›´æ¥é“¾æ¥" title="å®šä¹‰ resolverçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="åŸºç¡€è¯­æ³•">åŸºç¡€è¯­æ³•<a href="#åŸºç¡€è¯­æ³•" class="hash-link" aria-label="åŸºç¡€è¯­æ³•çš„ç›´æ¥é“¾æ¥" title="åŸºç¡€è¯­æ³•çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å‡è®¾æˆ‘ä»¬æœåŠ¡å™¨å®šä¹‰äº†ä»¥ä¸‹(éå¸¸ç®€çŸ­)çš„ schemaï¼š</p><div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Query</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">numberSix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Should always return the number 6 when queried</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">numberSeven</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Should always return 7</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æˆ‘ä»¬æƒ³è¦ç»™æ ¹<code>Query</code>ç±»å‹çš„<code>numberSix</code>å’Œ<code>numberSeven</code>å­—æ®µå®šä¹‰ resolverï¼Œä»¥è®©å®ƒä»¬åœ¨éœ€è¦çš„æ—¶å€™ï¼Œæ°¸è¿œè¿”å›<code>6</code>å’Œ<code>7</code>ã€‚</p><p>è¿™äº› resolver çš„å®šä¹‰å¤§æ¦‚å¦‚ä¸‹ï¼š</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> resolvers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Query</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">numberSix</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">numberSeven</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="å¦‚ä¾‹å­æ‰€ç¤º">å¦‚ä¾‹å­æ‰€ç¤ºï¼š<a href="#å¦‚ä¾‹å­æ‰€ç¤º" class="hash-link" aria-label="å¦‚ä¾‹å­æ‰€ç¤ºï¼šçš„ç›´æ¥é“¾æ¥" title="å¦‚ä¾‹å­æ‰€ç¤ºï¼šçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><ul><li>æœåŠ¡å™¨ä¸Šæ‰€æœ‰çš„ resolver è¢«å®šä¹‰åœ¨ä¸€ä¸ªå•ç‹¬çš„ JavaScript å¯¹è±¡ä¸­(å‰é¢ç¤ºä¾‹ä¸­è¢«å‘½åä¸º<code>resolvers</code>)ã€‚è¿™ä¸ªå¯¹è±¡è¢«ç§°ä½œ<strong>resolver map</strong>ã€‚</li><li>resolver map æ‹¥æœ‰ä¸ schema çš„ç±»å‹(å¦‚å‰é¢ç¤ºä¾‹ä¸­çš„<code>Query</code>)ç›¸å¯¹åº”çš„é¡¶çº§å­—æ®µã€‚</li><li>æ¯ä¸€ä¸ª resolver å‡½æ•°éƒ½å±äºå¯¹åº”å­—æ®µæ‰€å±çš„ç±»å‹ã€‚</li></ul><blockquote><p>ç§è´§ï¼šresolver å’Œ resolver mapï¼Œä¸æ˜¯ä¸€ä¸ªæ¦‚å¿µã€‚</p><p>resolver-&gt;field</p><p>resolver map-&gt;top-level type(æ›´åå‘ schema æ•´ä½“çš„å±‚çº§)</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä¼ é€’å‚æ•°">ä¼ é€’å‚æ•°<a href="#ä¼ é€’å‚æ•°" class="hash-link" aria-label="ä¼ é€’å‚æ•°çš„ç›´æ¥é“¾æ¥" title="ä¼ é€’å‚æ•°çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å‡è®¾æˆ‘ä»¬å®šä¹‰äº†å¦‚ä¸‹çš„ schemaï¼š</p><div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">ID</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Query</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">user</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">ID</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿé€šè¿‡ user çš„<code>id</code>æ¥æŸ¥è¯¢<code>user</code>å­—æ®µï¼Œä»¥è·å– user å¯¹åº”çš„ä¿¡æ¯ã€‚</p><p>ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œæˆ‘ä»¬çš„æœåŠ¡å™¨éœ€è¦è®¿é—® user æ•°æ®ã€‚é’ˆå¯¹è¿™ä¸ªè®¤ä¸ºçš„ä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬çš„æœåŠ¡å™¨å®šä¹‰äº†å¦‚ä¸‹ç¡¬ç¼–ç çš„æ•°ç»„ï¼š</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> users </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Elizabeth Bennet&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Fitzwilliam Darcy&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥ç»™<code>user</code>å­—æ®µå®šä¹‰ resolverï¼Œåƒä¸‹é¢è¿™æ ·ï¼š</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> resolvers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Query</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">user</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">parent</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> contextValue</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> info</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> users</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="å¦‚ä¾‹å­æ‰€ç¤º-1">å¦‚ä¾‹å­æ‰€ç¤ºï¼š<a href="#å¦‚ä¾‹å­æ‰€ç¤º-1" class="hash-link" aria-label="å¦‚ä¾‹å­æ‰€ç¤ºï¼šçš„ç›´æ¥é“¾æ¥" title="å¦‚ä¾‹å­æ‰€ç¤ºï¼šçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><ul><li><p>resolver å¯ä»¥é€‰æ‹©æ¥æ”¶å››ä¸ªå‚æ•°ï¼š<code>(parent, args, contextValue, info)</code></p><ul><li>æ›´å¤šç»†èŠ‚ï¼Œå‚è€ƒ<a href="https://www.apollographql.com/docs/apollo-server/data/resolvers#resolver-arguments" target="_blank" rel="noopener noreferrer">arguments</a></li></ul></li><li><p><code>args</code>å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒåŒ…å«äº†é€šè¿‡ GraphQL operation æä¾›ç»™å­—æ®µçš„æ‰€æœ‰ <em>GraphQL</em> å‚æ•°ã€‚</p></li></ul><blockquote><p>æ³¨æ„ï¼Œè¿™ä¸ªä¾‹å­æ²¡æœ‰ç»™<code>User</code>å­—æ®µ(<code>id</code>å’Œ<code>name</code>)å®šä¹‰ resolverã€‚æ˜¯å› ä¸º Apollo Server ä¸ºè¿™äº›å­—æ®µåˆ›å»ºçš„ <a href="https://www.apollographql.com/docs/apollo-server/data/resolvers#default-resolvers" target="_blank" rel="noopener noreferrer">default resolver</a> åšäº†æ­£ç¡®çš„äº‹ï¼šå®ƒç›´æ¥ä»å¯¹è±¡è·å–å€¼å¹¶é€šè¿‡<code>user</code>resolver è¿”å›ã€‚</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å°†-resolver-map-ä¼ é€’ç»™-apollo-server">å°† resolver map ä¼ é€’ç»™ Apollo Server<a href="#å°†-resolver-map-ä¼ é€’ç»™-apollo-server" class="hash-link" aria-label="å°† resolver map ä¼ é€’ç»™ Apollo Serverçš„ç›´æ¥é“¾æ¥" title="å°† resolver map ä¼ é€’ç»™ Apollo Serverçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨é¡¶å±‚<code>await</code>æ¥å¼‚æ­¥èµ·åŠ¨æˆ‘ä»¬çš„æœåŠ¡å™¨ã€‚å¦‚æœä½ æƒ³äº†è§£å¦‚ä½•é…ç½®ï¼Œè¯·æŸ¥çœ‹ <a href="https://www.apollographql.com/docs/apollo-server/getting-started#step-2-install-dependencies" target="_blank" rel="noopener noreferrer">Getting Started</a> è·å–æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚</p></blockquote><p>åœ¨å®šä¹‰äº†æ‰€æœ‰ resolver ä¹‹åï¼Œæ­é…ç€ schema çš„å®šä¹‰(ä½œä¸º<code>typeDefs</code>å±æ€§)ä¸€èµ·ï¼Œå°†å®ƒä»¬(ä½œä¸º<code>resolvers</code>å±æ€§)ä¼ é€’ç»™<code>Apollo Server</code>çš„æ„é€ å‡½æ•°ã€‚</p><p>ä¸‹é¢çš„ä¾‹å­å®šä¹‰äº†ç¡¬ç¼–ç çš„æ•°æ®é›†ã€schema å’Œ resolver mapã€‚åœ¨å°† schema å’Œ resolver map ä¼ é€’ç»™<code>Apollo Server</code>ååˆå§‹åŒ–äº†å®ä¾‹ã€‚</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">ApolloServer</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@apollo/server&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> startStandaloneServer </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@apollo/server/standalone&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Hardcoded data store</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> books </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;The Awakening&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">author</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Kate Chopin&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;City of Glass&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">author</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Paul Auster&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Schema definition</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> typeDefs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">#graphql</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  type Book {</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    title: String</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    author: String</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  type Query {</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    books: [Book]</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c"></span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Resolver map</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> resolvers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">Query</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">books</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> books</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Pass schema definition and resolvers to the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ApolloServer constructor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> server </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ApolloServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  typeDefs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  resolvers</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Launch the server</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> url </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">startStandaloneServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">ğŸš€ Server listening at: </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">url</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ³¨æ„ï¼Œä½ å¯ä»¥åœ¨å¤šä¸ªæ–‡ä»¶å’Œå¯¹è±¡ä¸­å®šä¹‰ resolverï¼Œåªè¦å°†æ‰€æœ‰ resolver åˆå¹¶åˆ°ä¸€ä¸ªå•ç‹¬çš„ã€è¢«ä¼ é€’ç»™<code>ApolloServer</code>æ„é€ å‡½æ•°çš„ resolver map å³å¯ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resolver-chain">Resolver chain<a href="#resolver-chain" class="hash-link" aria-label="Resolver chainçš„ç›´æ¥é“¾æ¥" title="Resolver chainçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å½“ query è¯·æ±‚ä¸€ä¸ªè¿”å›å€¼ä¸ºå¯¹è±¡ç±»å‹çš„å­—æ®µæ—¶ï¼Œè¿™ä¸ª query è‡³å°‘ä¹Ÿè¦è®¿é—®è¯¥å¯¹è±¡(å¦‚æœæ²¡æœ‰æŸ¥è¯¢è¯¥å¯¹è±¡ä¸­çš„å­—æ®µï¼Œæ²¡æœ‰ç†ç”±åœ¨ query ä¸­åŒ…å«è¿™ä¸ªå¯¹è±¡)å­—æ®µä¸­çš„ä¸€ä¸ªã€‚ä¸€ä¸ª query æœ€åº•å±‚çš„å­—æ®µï¼Œæ°¸è¿œè¿”å› scalarã€enum æˆ–è€…å®ƒä»¬çš„åˆ—è¡¨ã€‚</p><blockquote><p>ç§è´§ï¼šbottom outï¼Œæœ€åº•å±‚ï¼Ÿæˆ‘å¥½åƒæ˜ç™½äº†ï¼Œä½†æ˜¯å˜´è¯´ä¸å‡ºæ¥ ğŸ¤£</p></blockquote><p>ä¸¾ä¸ªä¾‹å­ï¼Œ<code>Product</code>ç±»å‹çš„æ‰€æœ‰å­—æ®µéƒ½å±äºâ€œbottom outâ€ï¼š</p><div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Product</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">ID</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">variants</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token scalar">String</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">availability</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">Availability</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"> </span><span class="token class-name">Availability</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token constant" style="color:#36acaa">AVAILABLE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token constant" style="color:#36acaa">DISCONTINUED</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç”±äºè¿™ä¸ªè§„åˆ™ï¼ŒApollo Server è§£æä¸€ä¸ªè¿”å›å€¼ä¸ºå¯¹è±¡ç±»å‹çš„å­—æ®µæ—¶ï¼Œå®ƒæ°¸è¿œä¼šè§£æè¿™ä¸ªå¯¹è±¡çš„ä¸€ä¸ªæˆ–æ›´å¤šå­—æ®µã€‚é‚£äº›å­å­—æ®µæˆ–è®¸ä¹ŸåŒ…å«å¯¹è±¡ç±»å‹ã€‚æ ¹æ® schemaï¼Œobject-field æ¨¡å¼å¯ä»¥æŒç»­åˆ°ä»»æ„æ·±åº¦ï¼Œè¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸º <strong>resolver chain</strong>ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä¾‹å­">ä¾‹å­<a href="#ä¾‹å­" class="hash-link" aria-label="ä¾‹å­çš„ç›´æ¥é“¾æ¥" title="ä¾‹å­çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å‡è®¾æœåŠ¡å™¨å®šä¹‰äº†å¦‚ä¸‹çš„ schemaï¼š</p><div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># A library has a branch and books</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Library</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">branch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">books</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token class-name">Book</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># A book has a title and author</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Book</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">title</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">author</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">Author</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># An author has a name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Author</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Query</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">libraries</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token class-name">Library</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¸‹é¢æ˜¯ä¸€ä¸ªé’ˆå¯¹è¯¥ schema æœ‰æ•ˆçš„ queryï¼š</p><div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">query</span><span class="token plain"> </span><span class="token definition-query function" style="color:#d73a49">GetBooksByLibrary</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token object">libraries</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token object">books</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token object">author</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿™ä¸ª query çš„ resolver chain æŸ¥è¯¢è¿‡ç¨‹ï¼Œç¬¦åˆ query æœ¬èº«çš„å±‚çº§ç»“æ„ï¼š
<img loading="lazy" alt="è¿™æ˜¯å›¾ç‰‡" src="/blog/assets/images/resolver-chain-6a3813dbfe3ae7b136cfb4620fa617a9.png" title="Resolver chain" width="898" height="69" class="img_ev3q"></p><p>è¿™äº› resolver æŒ‰å‰é¢æ‰€ç¤ºçš„é¡ºåºæ‰§è¡Œï¼Œå¹¶ä¸”å®ƒä»¬å„è‡ªçš„è¿”å›å€¼éƒ½ä¼šé€šè¿‡<code>parent</code>å‚æ•°ä¼ é€’ç»™ä¸‹ä¸€ä¸ªå¤„äº resolver chain ä¸­çš„ resolverã€‚</p><p>è¿™é‡Œæœ‰ä¸€æ®µä»£ç ç¤ºä¾‹ï¼Œå®ƒå¯ä»¥ç”¨è¿™ä¸ª resolver chain è§£æå‰é¢çš„ queryï¼š</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">ApolloServer</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@apollo/server&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> startStandaloneServer </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@apollo/server/standalone&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> libraries </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">branch</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;downtown&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">branch</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;riverside&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// The branch field of a book indicates which library has it in stock</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> books </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;The Awakening&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">author</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Kate Chopin&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">branch</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;riverside&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;City of Glass&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">author</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Paul Auster&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">branch</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;downtown&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Schema definition</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> typeDefs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">#graphql</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  # A library has a branch and books</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  type Library {</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    branch: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    books: [Book!]</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  # A book has a title and author</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  type Book {</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    title: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    author: Author!</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  # An author has a name</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  type Author {</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    name: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  # Queries can fetch a list of libraries</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  type Query {</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    libraries: [Library]</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c"></span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Resolver map</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> resolvers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">Query</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">libraries</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// Return our hardcoded array of libraries</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> libraries</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">Library</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">books</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">parent</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// Filter the hardcoded array of books to only include</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// books that are located at the correct branch</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> books</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">book</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> book</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">branch</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> parent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">branch</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">Book</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// The parent resolver (Library.books) returns an object with the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// author&#x27;s name in the &quot;author&quot; field. Return a JSON object containing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// the name, because this field expects an object.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">author</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">parent</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> parent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">author</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Because Book.author returns an object with a &quot;name&quot; field,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Apollo Server&#x27;s default resolver for Author.name will work.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// We don&#x27;t need to define one.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Pass schema definition and resolvers to the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ApolloServer constructor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> server </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ApolloServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  typeDefs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  resolvers</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Launch the server</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> url </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">startStandaloneServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">ğŸš€ Server listening at: </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">url</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¦‚æœæ›´æ–° query è¿˜å»æŸ¥è¯¢æ¯æœ¬ book çš„<code>title</code>å­—æ®µï¼š</p><div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">query</span><span class="token plain"> </span><span class="token definition-query function" style="color:#d73a49">GetBooksByLibrary</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token object">libraries</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token object">books</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">title</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token object">author</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>resolver chain çœ‹èµ·æ¥å°±æ˜¯ä¸‹é¢çš„æ ·å­äº†ï¼š
<img loading="lazy" alt="è¿™æ˜¯å›¾ç‰‡" src="/blog/assets/images/resolver-chain2-a440170802a03d792424251e2cfc25bd.png" title="Resolver chain" width="898" height="180" class="img_ev3q"></p><p>å½“ä¸€ä¸ª resolver chain åƒè¿™æ ·åˆ†å‰åï¼Œæ¯ä¸€ä¸ª subchain éƒ½å¯ä»¥å¹¶è¡Œæ‰§è¡Œã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resolver-å‚æ•°">Resolver å‚æ•°<a href="#resolver-å‚æ•°" class="hash-link" aria-label="Resolver å‚æ•°çš„ç›´æ¥é“¾æ¥" title="Resolver å‚æ•°çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>resolver å‡½æ•°è¢«ä¼ é€’äº† 4 ç§å‚æ•°ï¼š<code>parent</code>ã€<code>args</code>ã€<code>contextValue</code>å’Œ<code>info</code>(æŒ‰é¡ºåºæ’åˆ—)ã€‚</p><blockquote><p>ä½ å¯ä»¥åœ¨ä»£ç ä¸­ä½¿ç”¨ä»»ä½•åå­—æ¥å‘½åè¿™äº›å‚æ•°ï¼Œä½†æ˜¯ Apollo æ–‡æ¡£ä½¿ç”¨è¿™äº›åç§°ä½œä¸ºæƒ¯ä¾‹ã€‚ä¹Ÿå¸¸ç”¨çˆ¶ç±»å‹çš„åå­—æˆ–<code>source</code>æ¥æ›¿ä»£<code>parent</code>ã€‚</p></blockquote><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>parent</code></td><td>è¿™ä¸ªå­—æ®µçˆ¶çº§ resolver çš„è¿”å›å€¼(ä¹Ÿå°±æ˜¯æŒ‡ï¼Œ<a href="https://www.apollographql.com/docs/apollo-server/data/resolvers#resolver-chains" target="_blank" rel="noopener noreferrer">resolver chain</a> ä¸­çš„å‰ä¸€ä¸ª resolver)ã€‚ å¯¹äºæ²¡æœ‰çˆ¶çº§çš„é¡¶çº§å­—æ®µçš„ resolver(ä¾‹å¦‚<code>Query</code>çš„å­—æ®µ)ï¼Œè¿™ä¸ªå€¼ä»ä¼ é€’ç»™ Apollo Server æ„é€ å‡½æ•°çš„<code>rootValue</code>å‡½æ•°è·å–ã€‚</td></tr><tr><td><code>args</code></td><td>ä¸€ä¸ªåŒ…æ‹¬æä¾›ç»™è¿™ä¸ªå­—æ®µå…¨éƒ¨ GraphQL å‚æ•°çš„å¯¹è±¡ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå½“æ‰§è¡Œ<code>query{ user(id: &quot;4&quot;)}</code>æ—¶ï¼Œè¢«ä¼ é€’ç»™<code>user</code>resolver çš„<code>args</code>å¯¹è±¡æ˜¯<code>{ &quot;id&quot;: &quot;4&quot;}</code></td></tr><tr><td><code>contextValue</code></td><td>åœ¨ä¸€ä¸ª operation æ‰§è¡Œçš„å…¨éƒ¨ resolver ä¸­å…±äº«çš„å¯¹è±¡ã€‚ä½¿ç”¨è¿™ä¸ªå¯¹è±¡åˆ†äº«ç»™æ¯ä¸ª operation çš„çŠ¶æ€ï¼ŒåŒ…æ‹¬è®¤è¯ä¿¡æ¯ã€dataloader å®ä¾‹å’Œä»»ä½•å…¶ä»–è·¨ resolver è®¿é—®çš„ä¿¡æ¯ã€‚æŸ¥çœ‹<a href="https://www.apollographql.com/docs/apollo-server/data/resolvers#the-contextvalue-argument" target="_blank" rel="noopener noreferrer"><code>contextValue</code> argument</a>ä»¥äº†è§£æ›´å¤šä¿¡æ¯ã€‚</td></tr><tr><td><code>info</code></td><td>å®¹çº³å…³äº operation æ‰§è¡ŒçŠ¶æ€çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬å­—æ®µåç§°ã€ä»æ ¹å­—æ®µåˆ°è¿™ä¸ªå­—æ®µçš„è·¯å¾„å’Œæ›´å¤šä¿¡æ¯ã€‚å®ƒçš„æ ¸å¿ƒå­—æ®µè¢«åˆ—åœ¨<a href="https://github.com/graphql/graphql-js/blob/f851eba93167b04d6be1373ff27927b16352e202/src/type/definition.ts#L891-L902" target="_blank" rel="noopener noreferrer">GraphQL.js æºç </a>ã€‚Apollo Server ä½¿ç”¨<code>cacheControl</code>å­—æ®µæ¥å®Œå–„å®ƒã€‚</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="contextvalueå‚æ•°"><code>contextValue</code>å‚æ•°<a href="#contextvalueå‚æ•°" class="hash-link" aria-label="contextvalueå‚æ•°çš„ç›´æ¥é“¾æ¥" title="contextvalueå‚æ•°çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p><strong>resolver æ°¸è¿œä¸åº”è¯¥ç ´åæ€§åœ°ä¿®æ”¹<code>contextValue</code>å‚æ•°ã€‚</strong>è¿™ç¡®ä¿äº†æ‰€æœ‰ resolver ä¹‹é—´çš„ä¸€è‡´æ€§å¹¶é˜²æ­¢éé¢„æœŸé”™è¯¯çš„äº§ç”Ÿã€‚</p></blockquote><p>resolver é€šè¿‡ç¬¬ä¸‰ä¸ªå‚æ•°å¯ä»¥è®¿é—®å…±äº«çš„<code>contextValue</code>å¯¹è±¡ã€‚ä¸ºæŒ‡å®š operation æ‰§è¡Œçš„æ‰€æœ‰ resolver éƒ½å¯ä»¥è®¿é—®<code>contextValue</code>ï¼š</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> UserAPI </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;./datasources/users&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> resolvers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Query</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Our resolvers can access the fields in contextValue</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// from their third argument</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">currentUser</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> __</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> contextValue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> contextValue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dataSources</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">userApi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">findUser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">contextValue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">token</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">MyContext</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Context typing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  token</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> String</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  dataSources</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    userApi</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> UserAPI</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> server </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ApolloServer</span><span class="token class-name operator" style="color:#393A34">&lt;</span><span class="token class-name">MyContext</span><span class="token class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  typeDefs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  resolvers</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> url </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">startStandaloneServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">context</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> req </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    token</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getToken</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">req</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">headers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">authentication</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dataSources</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      userApi</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">UserAPI</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>äº†è§£æ›´å¤šå…³äºç®¡ç†è¿æ¥æ•°æ®åº“æˆ–å…¶ä»–æ•°æ®æºï¼Œè¯·å‚è€ƒ<a href="https://www.apollographql.com/docs/apollo-server/data/fetching-data" target="_blank" rel="noopener noreferrer">Fetching Data</a></p></blockquote><p>æ›´å¤šä¿¡æ¯å’Œç¤ºä¾‹ï¼Œå‚è€ƒ<a href="https://www.apollographql.com/docs/apollo-server/data/context" target="_blank" rel="noopener noreferrer">Sharing context</a>ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è¿”å›å€¼">è¿”å›å€¼<a href="#è¿”å›å€¼" class="hash-link" aria-label="è¿”å›å€¼çš„ç›´æ¥é“¾æ¥" title="è¿”å›å€¼çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>resolver å‡½æ•°çš„è¿”å›å€¼ï¼Œæ ¹æ®å®ƒçš„ç±»å‹è¢« Apollo Server ä»¥ä¸åŒæ–¹å¼å¤„ç†ã€‚</p><table><thead><tr><th>ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>scalar/object</td><td>resolver å¯ä»¥è¿”å›ä¸€ä¸ªå•ç‹¬çš„å€¼æˆ–å¯¹è±¡ï¼Œå°±åƒåœ¨<a href="https://www.apollographql.com/docs/apollo-server/data/resolvers#defining-a-resolver" target="_blank" rel="noopener noreferrer">Defining a schema</a>ä¸­å±•ç¤ºçš„ä¸€æ ·ã€‚è¿™ä¸ªè¿”å›å€¼é€šè¿‡<code>parent</code>å‚æ•°ï¼Œå‘ä¸‹ä¼ é€’ç»™ä»»ä½•åµŒå¥—çš„ resolverã€‚</td></tr><tr><td><code>Array</code></td><td>å½“ä¸”ä»…å½“ schema ä¸ resolver å…³è”çš„å­—æ®µåŒ…å«ä¸€ä¸ªåˆ—è¡¨æ—¶ï¼Œæ‰è¿”å›ä¸€ä¸ªæ•°ç»„ã€‚è¿”å›æ•°ç»„åï¼ŒApollo Server å¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹æ‰§è¡ŒåµŒå¥— resolverã€‚</td></tr><tr><td><code>null</code>/<code>undefined</code></td><td>è¡¨æ˜è¿™ä¸ªå­—æ®µçš„å€¼æ— æ³•è¢«æ‰¾åˆ°ã€‚å¦‚æœ scheme æ ‡æ˜ resolver çš„å­—æ®µå¯ä»¥ä¸º nullï¼Œé‚£ä¹ˆè¿™ä¸ª operation çš„ç»“æœï¼Œåœ¨å­—æ®µçš„ä½ç½®ä¼šå¡«å……<code>null</code>ä½œä¸ºè¿”å›å€¼ã€‚å¦‚æœ resolver çš„å­—æ®µä¸èƒ½ä¸º nullï¼ŒApollo Server è®¾ç½®å­—æ®µçš„çˆ¶çº§ä¸º<code>null</code>ã€‚å¦‚æœ‰å¿…è¦ï¼Œè¿™ä¸ªè¿‡ç¨‹æŒç»­å‘ä¸Š resolver chain çŸ¥é“å®ƒåˆ°è¾¾ä¸€ä¸ªå¯ä»¥ä¸º null çš„å­—æ®µã€‚è¿™ç¡®ä¿äº†è¿”å›å€¼æ°¸è¿œä¸ä¼šç»™ä¸€ä¸ªä¸èƒ½ä¸º null çš„å­—æ®µè¿”å›<code>null</code>ã€‚å½“å‡ºç°è¿™ç§æƒ…å†µæ—¶ï¼Œå“åº”ä¸­çš„<code>errors</code>å±æ€§å°†è¢«å¡«å……ä¸å­—æ®µçš„æ˜¯å¦å…è®¸ä¸º null ç›¸å…³çš„é”™è¯¯ã€‚</td></tr><tr><td><code>Promise</code></td><td>resolver å¯ä»¥å¼‚æ­¥ï¼Œè€Œä¸”å¯ä»¥æ‰§è¡Œå¼‚æ­¥æ“ä½œï¼Œä¾‹å¦‚ä»æ•°æ®åº“æˆ–åç«¯ API è·å–æ•°æ®ã€‚ä¸ºäº†æ”¯æŒè¿™äº›èƒ½åŠ›ï¼Œresolver å¯ä»¥è¿”å› promiseï¼Œè¯¥ promise è§£æä¸ºä»»ä½•å…¶ä»–æ”¯æŒçš„è¿”å›ç±»å‹ã€‚</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="default-resolver">Default resolver<a href="#default-resolver" class="hash-link" aria-label="Default resolverçš„ç›´æ¥é“¾æ¥" title="Default resolverçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å¦‚æœä¸ä¸ºæŒ‡å®šçš„ schema å­—æ®µå®šä¹‰ resolverï¼ŒApollo Server ä¼šç»™å®ƒå®šä¹‰ä¸€ä¸ª default resolverã€‚</p><p>default resolver å‡½æ•°çš„è°ƒç”¨é€»è¾‘å¦‚ä¸‹ï¼š
<img loading="lazy" alt="å›¾ç‰‡" src="/blog/assets/images/default-resolver-c8e7966195930d53e3181c5ff9970658.png" title="Default resolver" width="758" height="386" class="img_ev3q"></p><p>ä½œä¸ºä¸€ä¸ªä¾‹å­ï¼Œæ€è€ƒä¸‹é¢ schema ç‰‡æ®µï¼š</p><div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Book</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">title</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Author</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">books</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token class-name">Book</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¦‚æœ<code>books</code>å­—æ®µçš„ resolver è¿”å›ä¸€ä¸ªå¯¹è±¡çš„æ•°ç»„ï¼Œæ¯ä¸ªå¯¹è±¡åŒ…å«<code>title</code>å­—æ®µï¼Œä½ å¯ä»¥å¯¹<code>title</code>å­—æ®µä½¿ç”¨ default resolverã€‚default resolver å°†æ­£ç¡®è¿”å›<code>parent.title</code>ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è§£æ-union-å’Œ-interface">è§£æ union å’Œ interface<a href="#è§£æ-union-å’Œ-interface" class="hash-link" aria-label="è§£æ union å’Œ interfaceçš„ç›´æ¥é“¾æ¥" title="è§£æ union å’Œ interfaceçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>è¿™äº› GraphQL ç±»å‹å…è®¸å»å®šä¹‰ä¸€ä¸ªè¿”å›å¤šç§å¯èƒ½å¯¹è±¡ç±»å‹ä¸­ä¸€ç§çš„å­—æ®µã€‚ä¸ºäº†è§£æå¯ä»¥è¿”å›ä¸åŒå¯¹è±¡ç±»å‹çš„å­—æ®µï¼Œå¿…é¡»å®šä¹‰<code>__resolveType</code>å‡½æ•°å»å‘ŠçŸ¥ Apollo Server å“ªä¸ªå¯¹è±¡çš„ç±»å‹å°†è¢«è¿”å›ã€‚</p><blockquote><p>å‚è€ƒ<a href="https://www.apollographql.com/docs/apollo-server/schema/unions-interfaces/#resolving-a-union" target="_blank" rel="noopener noreferrer"><code>__resolveType</code>å‡½æ•°çš„ä¾‹å­</a></p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è§£æ-federated-entities">è§£æ federated entities<a href="#è§£æ-federated-entities" class="hash-link" aria-label="è§£æ federated entitiesçš„ç›´æ¥é“¾æ¥" title="è§£æ federated entitiesçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å‚è€ƒ<a href="https://www.apollographql.com/docs/federation/entities/#resolving-entities" target="_blank" rel="noopener noreferrer">Resolvering Entities</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç›‘æ§-resolver-æ€§èƒ½">ç›‘æ§ resolver æ€§èƒ½<a href="#ç›‘æ§-resolver-æ€§èƒ½" class="hash-link" aria-label="ç›‘æ§ resolver æ€§èƒ½çš„ç›´æ¥é“¾æ¥" title="ç›‘æ§ resolver æ€§èƒ½çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä¸æ‰€æœ‰ä»£ç ä¸€æ ·ï¼Œresolver çš„æ€§èƒ½å–å†³äºå®ƒçš„é€»è¾‘ã€‚æœ€é‡è¦çš„æ˜¯ç†è§£å“ªäº› schema å­—æ®µæ˜¯è®¡ç®—æˆæœ¬é«˜æˆ–è§£æç¼“æ…¢ï¼Œè¿™æ ·æ‰èƒ½æå‡å®ƒä»¬çš„æ€§èƒ½æˆ–ç¡®ä¿åªåœ¨å¿…è¦çš„æ—¶å€™æŸ¥è¯¢è¿™äº›å­—æ®µã€‚</p><p>Apollo Studio ç›´æ¥é›†æˆ Apollo Serverï¼Œä»¥æä¾›é¡¶å±‚å­—æ®µçš„ç›‘æ§æŒ‡æ ‡ï¼Œè¿™å¯ä»¥å¸®åŠ©åŠæ—¶äº†è§£ graph çš„æ€§èƒ½ã€‚æ›´å¤šä¿¡æ¯ï¼Œå‚è€ƒ<a href="https://www.apollographql.com/docs/studio/performance/" target="_blank" rel="noopener noreferrer">Analyzing performance</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>æ ‡ç­¾ï¼š</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/docs/tags/apollo">Apollo</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/docs/tags/graph-ql">GraphQL</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/docs/tags/æ¸£ç¿»è¯‘">æ¸£ç¿»è¯‘</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="æ–‡ä»¶é€‰é¡¹å¡"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/docs/Apollo Server/Defining a schema/directives"><div class="pagination-nav__sublabel">ä¸Šä¸€é¡µ</div><div class="pagination-nav__label">Directives</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/docs/about-me"><div class="pagination-nav__sublabel">ä¸‹ä¸€é¡µ</div><div class="pagination-nav__label">å…³äºæˆ‘</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#å®šä¹‰-resolver" class="table-of-contents__link toc-highlight">å®šä¹‰ resolver</a><ul><li><a href="#åŸºç¡€è¯­æ³•" class="table-of-contents__link toc-highlight">åŸºç¡€è¯­æ³•</a></li><li><a href="#ä¼ é€’å‚æ•°" class="table-of-contents__link toc-highlight">ä¼ é€’å‚æ•°</a></li></ul></li><li><a href="#å°†-resolver-map-ä¼ é€’ç»™-apollo-server" class="table-of-contents__link toc-highlight">å°† resolver map ä¼ é€’ç»™ Apollo Server</a></li><li><a href="#resolver-chain" class="table-of-contents__link toc-highlight">Resolver chain</a><ul><li><a href="#ä¾‹å­" class="table-of-contents__link toc-highlight">ä¾‹å­</a></li></ul></li><li><a href="#resolver-å‚æ•°" class="table-of-contents__link toc-highlight">Resolver å‚æ•°</a><ul><li><a href="#contextvalueå‚æ•°" class="table-of-contents__link toc-highlight"><code>contextValue</code>å‚æ•°</a></li></ul></li><li><a href="#è¿”å›å€¼" class="table-of-contents__link toc-highlight">è¿”å›å€¼</a></li><li><a href="#default-resolver" class="table-of-contents__link toc-highlight">Default resolver</a></li><li><a href="#è§£æ-union-å’Œ-interface" class="table-of-contents__link toc-highlight">è§£æ union å’Œ interface</a></li><li><a href="#è§£æ-federated-entities" class="table-of-contents__link toc-highlight">è§£æ federated entities</a></li><li><a href="#ç›‘æ§-resolver-æ€§èƒ½" class="table-of-contents__link toc-highlight">ç›‘æ§ resolver æ€§èƒ½</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">å…¶ä»–å¹³å°</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/lin__xii" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://space.bilibili.com/5346265" target="_blank" rel="noopener noreferrer" class="footer__link-item">Bilibili<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">ç«™å†…å·¥å…·</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://lin-xii.github.io/blog/rss.xml" target="_blank" rel="noopener noreferrer" class="footer__link-item">rss<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">å°ä¼™ä¼´ä»¬</div><ul class="footer__items clean-list"><li class="footer__item"><a href="http://blog.topcaver.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">TopCaver<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 æ—åäºŒXII, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/blog/assets/js/runtime~main.47953451.js"></script>
<script src="/blog/assets/js/main.a22a5db0.js"></script>
</body>
</html>